(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{sJ2M:function(e,t,c){"use strict";c.r(t),c.d(t,"AdminModule",function(){return Bc});var n=c("ofXK"),i=c("oOf3"),a=c("1kSV"),o=c("3Pt+"),s=c("tyNb"),r=c("quSY"),d=c("AytR"),l=c("0IaG"),u=c("fXoL"),b=c("IRLN"),g=c("EnSQ"),h=c("OC8m"),m=c("F4W7");const f=["localGovernmentId"];function p(e,t){1&e&&u.Zb(0)}function v(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function y(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Full name must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function I(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Full name must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function S(e,t){if(1&e&&(u.dc(0,"div",25),u.Oc(1,v,2,0,"div",26),u.Oc(2,y,2,1,"div",26),u.Oc(3,I,2,1,"div",26),u.cc()),2&e){u.rc();const e=u.Gc(4);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function x(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function O(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Please enter a valid email. "),u.cc())}function K(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(10);u.Kb(1),u.Sc(" Email must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function Q(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(10);u.Kb(1),u.Sc(" Email must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function w(e,t){if(1&e&&(u.dc(0,"div",25),u.Oc(1,x,2,0,"div",26),u.Oc(2,O,2,0,"div",26),u.Oc(3,K,2,1,"div",26),u.Oc(4,Q,2,1,"div",26),u.cc()),2&e){u.rc();const e=u.Gc(10);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.pattern),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function k(e,t){if(1&e&&(u.dc(0,"option",27),u.Qc(1),u.sc(2,"uppercase"),u.cc()),2&e){const e=t.$implicit;u.yc("value",e._id),u.Kb(1),u.Rc(u.tc(2,2,e.name))}}function C(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Select a Role. "),u.cc())}function P(e,t){if(1&e&&(u.dc(0,"div",25),u.Oc(1,C,2,0,"div",26),u.cc()),2&e){u.rc();const e=u.Gc(16);u.Kb(1),u.yc("ngIf",e.errors.required)}}function L(e,t){if(1&e&&(u.dc(0,"option",27),u.Qc(1),u.sc(2,"uppercase"),u.cc()),2&e){const e=t.$implicit;u.yc("value",e._id),u.Kb(1),u.Rc(u.tc(2,2,e.name+" ("+e.code+")"))}}function A(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Select a local government. "),u.cc())}function T(e,t){if(1&e&&(u.dc(0,"div",25),u.Oc(1,A,2,0,"div",26),u.cc()),2&e){u.rc();const e=u.Gc(25);u.Kb(1),u.yc("ngIf",e.errors.required)}}function z(e,t){if(1&e){const e=u.ec();u.dc(0,"div",9),u.dc(1,"label",10),u.Qc(2,"Full Name"),u.cc(),u.dc(3,"input",11,12),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().formName=t}),u.cc(),u.Oc(5,S,4,3,"div",13),u.cc(),u.dc(6,"div",9),u.dc(7,"label",14),u.Qc(8,"Email"),u.cc(),u.dc(9,"input",15,16),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().formEmail=t}),u.cc(),u.Oc(11,w,5,4,"div",13),u.cc(),u.dc(12,"div",9),u.dc(13,"label",17),u.Qc(14,"Role"),u.cc(),u.dc(15,"select",18,19),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().formRoleId=t})("change",function(){return u.Ic(e),u.rc().filterZones()}),u.dc(17,"option",20),u.Qc(18,"Select a Role"),u.cc(),u.Oc(19,k,3,4,"option",21),u.cc(),u.Oc(20,P,2,1,"div",13),u.cc(),u.dc(21,"div",9),u.dc(22,"label",22),u.Qc(23,"Local Government"),u.cc(),u.dc(24,"select",23,24),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().formLga=t}),u.dc(26,"option",20),u.Qc(27,"Select a Local Government"),u.cc(),u.Oc(28,L,3,4,"option",21),u.cc(),u.Oc(29,T,2,1,"div",13),u.cc()}if(2&e){const e=u.Gc(4),t=u.Gc(10),c=u.Gc(16),n=u.Gc(25),i=u.rc();u.Kb(1),u.Pb("text-danger",e.touched&&e.invalid),u.Kb(2),u.Pb("error-control",e.touched&&e.invalid),u.yc("ngModel",i.formName),u.Kb(2),u.yc("ngIf",e.touched&&e.invalid),u.Kb(2),u.Pb("text-danger",t.touched&&t.invalid),u.Kb(2),u.Pb("error-control",t.touched&&t.invalid),u.yc("ngModel",i.formEmail)("pattern",i.emailPattern),u.Kb(2),u.yc("ngIf",t.touched&&t.invalid),u.Kb(2),u.Pb("text-danger",c.touched&&c.invalid),u.Kb(2),u.Pb("error-control",c.touched&&c.invalid),u.yc("ngModel",i.formRoleId)("disabled",i.data),u.Kb(4),u.yc("ngForOf",i.rolesList),u.Kb(1),u.yc("ngIf",c.touched&&c.invalid),u.Kb(2),u.Pb("text-danger",n.touched&&n.invalid),u.Kb(2),u.Pb("error-control",n.touched&&n.invalid),u.yc("ngModel",i.formLga)("disabled",i.data),u.Kb(4),u.yc("ngForOf",i.zones),u.Kb(1),u.yc("ngIf",n.touched&&n.invalid)}}function R(e,t){1&e&&(u.dc(0,"app-loader"),u.Qc(1,"Please wait..."),u.cc())}let G=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.action="Add New User",this.token=sessionStorage.getItem("token"),this.rolesList=JSON.parse(sessionStorage.getItem("roleList")).filter(e=>"super-admin"!=e.name),this.zones=[],this.initiaitorZones=[],this.reviewerZone=[],this.emailPattern=d.a.emailPattern,this.zonesSubscription=new r.a,this.regSubscription=new r.a,this.formName="",this.formEmail="",this.formRoleId="",this.formLga=""}ngOnInit(){this.getLocalGovernments(),this.data&&(this.action="Edit User",this.formName=this.data.name,this.formEmail=this.data.email,this.formRoleId=this.data.role,this.formLga=this.data.localGovernment._id)}ngOnDestroy(){this.loader.hideLoader(),this.zonesSubscription.unsubscribe(),this.regSubscription.unsubscribe()}filterZones(){if(!this.data){this.localGovernmentId.reset("");const e=this.rolesList.find(e=>"reviewer"==e.name);this.zones=e._id===this.formRoleId?[...this.reviewerZone]:[...this.initiaitorZones]}}getLocalGovernments(){this.loader.showLoader(),this.zonesSubscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{if(this.loader.hideLoader(),!this.data)return this.initiaitorZones=e.filter(e=>"00"!=e.code&&"01"!=e.code),void(this.reviewerZone=e.filter(e=>"01"==e.code));this.zones=[...e]})}submit(e){this.notifications.prompt(this.data?"Save changes ?":"Create user?").then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=d.a.users;this.data?this.updateExisting(this.data._id,t):this.saveNewUser(e.value,t)}})}saveNewUser(e,t){this.regSubscription=this.dataService.post(t,e,this.token).subscribe(e=>{this.notifications.successToast("User created successfully."),this.loader.hideLoader(),this.dialogRef.close(!0)})}updateExisting(e,t){this.regSubscription=this.dataService.update(t,e,{name:this.formName,email:this.formEmail,roleId:this.formRoleId,localGovernmentId:this.formLga},this.token).subscribe(e=>{this.notifications.successToast("User successfully updated."),this.loader.hideLoader(),this.dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(b.a),u.Xb(g.a),u.Xb(l.g),u.Xb(h.a),u.Xb(l.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-add-user"]],viewQuery:function(e,t){if(1&e&&u.Uc(f,1),2&e){let e;u.Fc(e=u.oc())&&(t.localGovernmentId=e.first)}},decls:15,vars:10,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","5","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","email"],["type","email","id","email","name","email","minlength","5","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["for","roleId"],["id","roleId","name","roleId","required","",1,"form-control","form-control-sm",2,"border-radius","2px",3,"ngModel","disabled","ngModelChange","change"],["roleId","ngModel"],["selected","","hidden","","value",""],[3,"value",4,"ngFor","ngForOf"],["for","localGovernmentId"],["id","localGovernmentId","name","localGovernmentId","required","",1,"form-control","form-control-sm",2,"border-radius","2px",3,"ngModel","disabled","ngModelChange"],["localGovernmentId","ngModel"],[1,"text-danger","mt-1"],[4,"ngIf"],[3,"value"]],template:function(e,t){if(1&e){const e=u.ec();u.dc(0,"form",0,1),u.nc("ngSubmit",function(){u.Ic(e);const c=u.Gc(1);return t.submit(c)}),u.dc(2,"p",2),u.Qc(3),u.cc(),u.dc(4,"mat-dialog-content"),u.Oc(5,p,1,0,"ng-container",3),u.cc(),u.dc(6,"mat-dialog-actions",4),u.dc(7,"button",5),u.Qc(8," Save "),u.cc(),u.dc(9,"button",6),u.Qc(10," Cancel "),u.cc(),u.cc(),u.Oc(11,z,30,29,"ng-template",null,7,u.Pc),u.Oc(13,R,2,0,"ng-template",null,8,u.Pc),u.cc()}if(2&e){const e=u.Gc(1),c=u.Gc(12),n=u.Gc(14);u.Kb(3),u.Rc(t.action),u.Kb(2),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible||e.valid),u.yc("disabled",t.loader.loaderVisible||e.invalid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.p,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,o.v,o.y,o.t,o.A,n.o,m.a],pipes:[n.A],styles:[""]}),e})();var M=c("5dVO"),N=c("mURs"),F=c("fC9P");function E(e,t){1&e&&u.Zb(0)}function $(e,t){if(1&e&&(u.dc(0,"option",28),u.Qc(1),u.cc()),2&e){const e=t.$implicit;u.yc("value",e),u.Kb(1),u.Sc("Show ",e," Items")}}function j(e,t){if(1&e){const e=u.ec();u.dc(0,"div",25),u.dc(1,"select",26),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().pageSize=t})("change",function(){return u.Ic(e),u.rc().onPageSizeChange()}),u.Oc(2,$,2,2,"option",27),u.cc(),u.cc()}if(2&e){const e=u.rc();u.Kb(1),u.yc("ngModel",e.pageSize),u.Kb(1),u.yc("ngForOf",e.pages)}}function X(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function V(e,t){1&e&&u.Zb(0)}function q(e,t){if(1&e&&u.Oc(0,V,1,0,"ng-container",17),2&e){const e=u.rc(),t=u.Gc(38),c=u.Gc(36);u.yc("ngIf",e.users.length>0)("ngIfThen",t)("ngIfElse",c)}}function Y(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function D(e,t){if(1&e){const e=u.ec();u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.Qc(7),u.cc(),u.dc(8,"td"),u.Qc(9),u.cc(),u.dc(10,"td"),u.Qc(11),u.sc(12,"date"),u.cc(),u.dc(13,"td"),u.dc(14,"button",35),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).addUser(c)}),u.Qc(15,"Edit"),u.cc(),u.Qc(16," \xa0 \xa0 "),u.dc(17,"div",36,37),u.dc(19,"button",38),u.nc("focus",function(){return u.Ic(e),u.Gc(18).open()}),u.Qc(20,"More"),u.cc(),u.dc(21,"div",39),u.dc(22,"button",40),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).resetPassword(c)}),u.Qc(23,"Reset Password"),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc()}if(2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc((n.p-1)*n.pageSize+(e+1)),u.Kb(2),u.Rc(c.name),u.Kb(2),u.Rc(c.email),u.Kb(2),u.Rc(c.localGovernment.name),u.Kb(2),u.Rc(u.uc(12,5,c.dateCreated,"medium"))}}const Z=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function _(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",29),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",30),u.Qc(5,"Full Name"),u.cc(),u.dc(6,"th",31),u.Qc(7,"Email"),u.cc(),u.dc(8,"th",32),u.Qc(9,"Zone"),u.cc(),u.dc(10,"th",33),u.Qc(11,"Date Created"),u.cc(),u.dc(12,"th"),u.Qc(13,"Actions"),u.cc(),u.cc(),u.cc(),u.Oc(14,D,24,8,"tbody",34),u.sc(15,"paginate"),u.sc(16,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.users),u.Kb(2),u.yc("appSort",e.users),u.Kb(2),u.yc("appSort",e.users),u.Kb(2),u.yc("appSort",e.users),u.Kb(2),u.yc("appSort",e.users),u.Kb(4),u.yc("ngForOf",u.uc(15,6,u.uc(16,9,e.users,e.searchText),u.Ec(12,Z,e.pageSize,e.p,e.totalItems)))}}let B=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.dialog=c,this.notifications=n,this.searchText="",this.users=[],this.p=1,this.pageSize=5,this.pages=[1,5,10,15,20],this.totalItems=0,this.active="initiators",this.display="Initiators List",this.rolesList=[...JSON.parse(sessionStorage.getItem("roleList"))],this.subscription=new r.a}ngOnInit(){this.tabClick("initiators")}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}tabClick(e){let t;switch(this.p=1,this.pageSize=5,this.active=e,e){case"initiators":t=this.getRole("initiator"),this.display="Initiators List";break;case"admins":t=this.getRole("admin"),this.display="Admin List";break;default:t=this.getRole("reviewer"),this.display="Reviewer List"}this.getUsers(t._id)}onPageSizeChange(){this.onNavigate(1)}onNavigate(e){let t;switch(e&&(this.p=e),this.active){case"initiators":t=this.getRole("initiator");break;case"admins":t=this.getRole("admin");break;default:t=this.getRole("reviewer")}this.getUsers(t._id,this.pageSize,this.p)}getRole(e){return this.rolesList.find(t=>t.name===e)}getUsers(e,t,c){this.loader.showLoader();const n=`${d.a.users}/by-role`,i=sessionStorage.getItem("token");this.subscription=this.dataService.get(n,i,e,{pageSize:t,page:c}).subscribe(e=>{this.users=[...e.users],this.totalItems=e.totalDocs,this.loader.hideLoader()})}addUser(e){window.scroll(0,0),this.dialog.open(G,{width:"32rem",disableClose:!0,data:e||null}).afterClosed().subscribe(e=>{e&&this.tabClick(this.active)})}resetPassword(e){this.notifications.prompt(`Are you sure you want to reset ${e.name.toUpperCase()}'s password ?`).then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=`${d.a.users}/reset-password`,c=sessionStorage.getItem("token");this.subscription=this.dataService.update(t,e._id,{},c).subscribe(t=>{this.notifications.alert(`${e.name.toUpperCase()}'s password has been reset.<br/>New password: password`).then(e=>{e.isConfirmed&&this.tabClick(this.active)})})}})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(M.a),u.Xb(g.a),u.Xb(l.b),u.Xb(h.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-users"]],decls:39,vars:18,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12",2,"text-align","center"],["role","group",1,"btn-group","mb-4"],["type","button",1,"magnifyText","btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"disabled","click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["class","float-left",4,"ngIf"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],[1,"float-left"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","email",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","localGovernment.name",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","dateCreated",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-primary","btn-sm",2,"color","white!important",3,"click"],["ngbDropdown","","container","body",1,"d-inline-block"],["moreActionsDrop","ngbDropdown"],["id","moredropDown","ngbDropdownAnchor","",1,"magnifyText","btn","btn-sm","btn-outline-primary",3,"focus"],["ngbDropdownMenu","","aria-labelledby","moredropDown"],["ngbDropdownItem","",1,"my-2",2,"font-size","105%!important",3,"click"]],template:function(e,t){if(1&e&&(u.dc(0,"nav",0),u.dc(1,"ol",1),u.dc(2,"li",2),u.dc(3,"a",3),u.Qc(4,"Users"),u.cc(),u.cc(),u.dc(5,"li",4),u.Qc(6),u.cc(),u.cc(),u.cc(),u.dc(7,"div",5),u.dc(8,"div",6),u.dc(9,"button",7),u.nc("click",function(){return t.tabClick("initiators")}),u.Qc(10," Initiators "),u.cc(),u.dc(11,"button",7),u.nc("click",function(){return t.tabClick("admins")}),u.Qc(12," Admins "),u.cc(),u.dc(13,"button",7),u.nc("click",function(){return t.tabClick("reviewers")}),u.Qc(14," Reviewers "),u.cc(),u.cc(),u.cc(),u.dc(15,"div",8),u.dc(16,"div",9),u.dc(17,"div",10),u.dc(18,"div",11),u.dc(19,"h6",12),u.Qc(20,"USERS MASTER LIST"),u.cc(),u.dc(21,"button",13),u.nc("click",function(){return t.addUser()}),u.dc(22,"span"),u.Qc(23,"Add User"),u.cc(),u.cc(),u.dc(24,"input",14),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(25,"div",15),u.dc(26,"table",16),u.Oc(27,E,1,0,"ng-container",17),u.cc(),u.dc(28,"div",18),u.Oc(29,j,3,2,"div",19),u.dc(30,"pagination-controls",20),u.nc("pageChange",function(e){return t.onNavigate(e)}),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(31,X,5,0,"ng-template",null,21,u.Pc),u.Oc(33,q,1,3,"ng-template",null,22,u.Pc),u.Oc(35,Y,4,0,"ng-template",null,23,u.Pc),u.Oc(37,_,17,16,"ng-template",null,24,u.Pc)),2&e){const e=u.Gc(32),c=u.Gc(34);u.Kb(6),u.Rc(t.display),u.Kb(3),u.Pb("btn-active","initiators"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(2),u.Pb("btn-active","admins"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(2),u.Pb("btn-active","reviewers"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(8),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible),u.Kb(3),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c),u.Kb(2),u.yc("ngIf",t.users.length>0)}},directives:[o.c,o.p,o.s,n.p,i.c,o.y,n.o,o.t,o.A,m.a,N.a,a.a,a.b,a.d,a.c],pipes:[i.b,F.a,n.f],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function H(e,t){1&e&&u.Zb(0)}function U(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function J(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Zone name must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function W(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Zone name must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function ee(e,t){if(1&e&&(u.dc(0,"div",17),u.Oc(1,U,2,0,"div",18),u.Oc(2,J,2,1,"div",18),u.Oc(3,W,2,1,"div",18),u.cc()),2&e){u.rc();const e=u.Gc(4);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function te(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function ce(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(10);u.Kb(1),u.Sc(" Zone code must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function ne(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(10);u.Kb(1),u.Sc(" Zone code must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function ie(e,t){if(1&e&&(u.dc(0,"div",17),u.Oc(1,te,2,0,"div",18),u.Oc(2,ce,2,1,"div",18),u.Oc(3,ne,2,1,"div",18),u.cc()),2&e){u.rc();const e=u.Gc(10);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function ae(e,t){if(1&e){const e=u.ec();u.dc(0,"div",9),u.dc(1,"label",10),u.Qc(2,"Zone Name"),u.cc(),u.dc(3,"input",11,12),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().zoneName=t}),u.cc(),u.Oc(5,ee,4,3,"div",13),u.cc(),u.dc(6,"div",9),u.dc(7,"label",14),u.Qc(8,"Zone Code"),u.cc(),u.dc(9,"input",15,16),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().zoneCode=t}),u.cc(),u.Oc(11,ie,4,3,"div",13),u.cc()}if(2&e){const e=u.Gc(4),t=u.Gc(10),c=u.rc();u.Kb(1),u.Pb("text-danger",e.touched&&e.invalid),u.Kb(2),u.Pb("error-control",e.touched&&e.invalid),u.yc("ngModel",c.zoneName),u.Kb(2),u.yc("ngIf",e.touched&&e.invalid),u.Kb(2),u.Pb("text-danger",t.touched&&t.invalid),u.Kb(2),u.Pb("error-control",t.touched&&t.invalid),u.yc("ngModel",c.zoneCode),u.Kb(2),u.yc("ngIf",t.touched&&t.invalid)}}function oe(e,t){1&e&&(u.dc(0,"app-loader"),u.Qc(1,"Please wait..."),u.cc())}let se=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.zoneName="",this.zoneCode=""}ngOnInit(){this.data&&(this.zoneName=this.data.name,this.zoneCode=this.data.code)}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt("Are you sure you want to proceed?").then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=d.a.zones;this.subscription=this.data?this.dataService.update(t,this.data._id,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} (${e.code}) updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)}):this.dataService.post(t,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} (${e.code}) updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)})}})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(b.a),u.Xb(g.a),u.Xb(l.g),u.Xb(h.a),u.Xb(l.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-edit-enrollment-zone"]],decls:15,vars:14,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","3","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","code"],["type","text","id","code","name","code","minlength","2","maxlength","3","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["code","ngModel"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=u.ec();u.dc(0,"form",0,1),u.nc("ngSubmit",function(){u.Ic(e);const c=u.Gc(1);return t.submit(c.value)}),u.dc(2,"p",2),u.Qc(3),u.cc(),u.dc(4,"mat-dialog-content"),u.Oc(5,H,1,0,"ng-container",3),u.cc(),u.dc(6,"mat-dialog-actions",4),u.dc(7,"button",5),u.Qc(8," Save "),u.cc(),u.dc(9,"button",6),u.Qc(10," Cancel "),u.cc(),u.cc(),u.Oc(11,ae,12,12,"ng-template",null,7,u.Pc),u.Oc(13,oe,2,0,"ng-template",null,8,u.Pc),u.cc()}if(2&e){const e=u.Gc(1),c=u.Gc(12),n=u.Gc(14);u.Kb(3),u.Sc("",t.data?"Edit ":"New "," Enrollment Zone"),u.Kb(2),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),u.Kb(2),u.Pb("btn-primary",t.data)("btn-success",!t.data)("magnifyText",!t.loader.loaderVisible||e.valid),u.yc("disabled",t.loader.loaderVisible||e.invalid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.p,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function re(e,t){1&e&&u.Zb(0)}function de(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function le(e,t){1&e&&u.Zb(0)}function ue(e,t){if(1&e&&u.Oc(0,le,1,0,"ng-container",14),2&e){const e=u.rc(),t=u.Gc(29),c=u.Gc(27);u.yc("ngIf",e.zones.length>0)("ngIfThen",t)("ngIfElse",c)}}function be(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function ge(e,t){if(1&e){const e=u.ec();u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.Qc(7),u.sc(8,"uppercase"),u.cc(),u.dc(9,"td"),u.Qc(10," \xa0 "),u.dc(11,"button",25),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).editZone(c)}),u.Qc(12," Edit Center "),u.cc(),u.cc(),u.cc(),u.cc()}if(2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc(10*(n.p-1)+(e+1)),u.Kb(2),u.Rc(c.name),u.Kb(2),u.Rc(u.tc(8,3,c.code))}}const he=function(e){return{itemsPerPage:10,currentPage:e}};function me(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",21),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",22),u.Qc(5,"Name"),u.cc(),u.dc(6,"th",23),u.Qc(7,"Center Code"),u.cc(),u.dc(8,"th"),u.Qc(9,"Actions"),u.cc(),u.cc(),u.cc(),u.Oc(10,ge,13,5,"tbody",24),u.sc(11,"paginate"),u.sc(12,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.zones),u.Kb(2),u.yc("appSort",e.zones),u.Kb(2),u.yc("appSort",e.zones),u.Kb(4),u.yc("ngForOf",u.uc(11,4,u.uc(12,7,e.zones,e.searchText),u.Cc(10,he,e.p)))}}let fe=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.zones=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getZones()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}getZones(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{const t=["00","01"];this.zones=e.filter(e=>!t.includes(e.code)),this.loader.hideLoader()})}editZone(e){window.scroll(0,0),this.dialog.open(se,{data:e,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getZones()})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(M.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.b))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-enrollment-zones"]],decls:30,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","code",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"]],template:function(e,t){if(1&e&&(u.dc(0,"nav",0),u.dc(1,"ol",1),u.dc(2,"li",2),u.dc(3,"a",3),u.Qc(4,"Registration Centers"),u.cc(),u.cc(),u.dc(5,"li",4),u.Qc(6,"All Centers"),u.cc(),u.cc(),u.cc(),u.dc(7,"div",5),u.dc(8,"div",6),u.dc(9,"div",7),u.dc(10,"div",8),u.dc(11,"h6",9),u.Qc(12,"REGISTRATION CENTERS MASTER LIST"),u.cc(),u.dc(13,"button",10),u.nc("click",function(){return t.editZone(null)}),u.dc(14,"span"),u.Qc(15,"Add Center"),u.cc(),u.cc(),u.dc(16,"input",11),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(17,"div",12),u.dc(18,"table",13),u.Oc(19,re,1,0,"ng-container",14),u.cc(),u.dc(20,"div",15),u.dc(21,"pagination-controls",16),u.nc("pageChange",function(e){return t.p=e}),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(22,de,5,0,"ng-template",null,17,u.Pc),u.Oc(24,ue,1,3,"ng-template",null,18,u.Pc),u.Oc(26,be,4,0,"ng-template",null,19,u.Pc),u.Oc(28,me,13,12,"ng-template",null,20,u.Pc)),2&e){const e=u.Gc(23),c=u.Gc(25);u.Kb(16),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[o.c,o.p,o.s,n.p,i.c,m.a,N.a,n.o],pipes:[i.b,F.a,n.A],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();var pe=c("wd/R");class ve{static cannotContainSpace(e){return e.value.indexOf(" ")>=0?{cannotContainSpace:!0}:null}static cannotContainDecimal(e){return(e.value+"").indexOf(".")>=0?{cannotContainDecimal:!0}:null}static shouldBeUnique(e){return new Promise((t,c)=>{setTimeout(()=>{console.log("Ok"),t("db value"===e.value?{shouldBeUnique:!0}:null)},2e3)})}}var ye=c("YWmY");function Ie(e,t){1&e&&u.Zb(0)}function Se(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Hajj year is required "),u.cc())}function xe(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Enter a valid year "),u.cc())}function Oe(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Spaces are not allowed "),u.cc())}function Ke(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Year must not be less than current year "),u.cc())}function Qe(e,t){if(1&e&&(u.dc(0,"div",23),u.Oc(1,Se,2,0,"div",24),u.Oc(2,xe,2,0,"div",24),u.Oc(3,Oe,2,0,"div",24),u.Oc(4,Ke,2,0,"div",24),u.cc()),2&e){const e=u.rc(2);u.Kb(1),u.yc("ngIf",e.year.errors.required),u.Kb(1),u.yc("ngIf",e.year.errors.pattern),u.Kb(1),u.yc("ngIf",e.year.errors.cannotContainSpace),u.Kb(1),u.yc("ngIf",e.year.errors.lessThanCurrentYear)}}function we(e,t){if(1&e&&(u.dc(0,"option",25),u.Qc(1),u.cc()),2&e){const e=t.$implicit;u.yc("value",e),u.Kb(1),u.Rc(e?"Active":"Inactive")}}function ke(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Hajj year status is required "),u.cc())}function Ce(e,t){if(1&e&&(u.dc(0,"div",23),u.Oc(1,ke,2,0,"div",24),u.cc()),2&e){const e=u.rc(2);u.Kb(1),u.yc("ngIf",e.active.errors.required)}}function Pe(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Date opened is required "),u.cc())}function Le(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Date Opened must not be less than today "),u.cc())}function Ae(e,t){if(1&e&&(u.dc(0,"div",23),u.Oc(1,Pe,2,0,"div",24),u.Oc(2,Le,2,0,"div",24),u.cc()),2&e){const e=u.rc(2);u.Kb(1),u.yc("ngIf",e.dateOpened.errors.required),u.Kb(1),u.yc("ngIf",e.dateOpened.errors.lessThanToday)}}function Te(e,t){1&e&&(u.dc(0,"div",26),u.dc(1,"h6"),u.Qc(2,"No seats allocated yet, click add seats button to add allocations."),u.cc(),u.cc())}function ze(e,t){1&e&&(u.dc(0,"div",27),u.dc(1,"h6"),u.Qc(2,"Seat Allocations"),u.cc(),u.cc())}function Re(e,t){if(1&e&&(u.dc(0,"option",37),u.Qc(1),u.cc()),2&e){const e=t.$implicit;u.yc("value",e._id)("hidden",e.exempted),u.Kb(1),u.Rc(e.name)}}function Ge(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Enrollment center is required "),u.cc())}function Me(e,t){if(1&e&&(u.dc(0,"div",23),u.Oc(1,Ge,2,0,"div",24),u.cc()),2&e){const e=u.rc().$implicit;u.Kb(1),u.yc("ngIf",e.get("zone").errors.required)}}function Ne(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Seat allocated is required "),u.cc())}function Fe(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Enter a valid seat number "),u.cc())}function Ee(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){const e=u.rc(2).$implicit;u.Kb(1),u.Sc(" Seat allocation must be atleast ",e.get("seatsAllocated").errors.min.min,". ")}}function $e(e,t){if(1&e&&(u.dc(0,"div",23),u.Oc(1,Ne,2,0,"div",24),u.Oc(2,Fe,2,0,"div",24),u.Oc(3,Ee,2,1,"div",24),u.cc()),2&e){const e=u.rc().$implicit;u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").errors.required),u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").errors.pattern),u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").errors.min)}}function je(e,t){if(1&e){const e=u.ec();u.bc(0),u.dc(1,"form",28),u.dc(2,"div",29),u.dc(3,"button",30),u.nc("click",function(){u.Ic(e);const c=t.index;return u.rc(2).removeSeatAllocation(c)}),u.Qc(4," Remove "),u.cc(),u.cc(),u.dc(5,"div",8),u.dc(6,"div",9),u.dc(7,"label",31),u.Qc(8,"Center"),u.cc(),u.dc(9,"select",32),u.nc("change",function(){u.Ic(e);const c=t.$implicit,n=t.index;return u.rc(2).exemptZone(c.get("zone").value,n)}),u.dc(10,"option",33),u.Qc(11,"Select center"),u.cc(),u.Oc(12,Re,2,3,"option",34),u.cc(),u.Oc(13,Me,2,1,"div",12),u.cc(),u.dc(14,"div",9),u.dc(15,"label",35),u.Qc(16,"Seats"),u.cc(),u.Yb(17,"input",36),u.Oc(18,$e,4,3,"div",12),u.cc(),u.cc(),u.cc(),u.ac()}if(2&e){const e=t.$implicit,c=u.rc(2);u.Kb(1),u.yc("formGroup",e),u.Kb(6),u.Pb("text-danger",e.get("zone").invalid&&e.get("zone").touched),u.Kb(2),u.Pb("border-danger",e.get("zone").invalid&&e.get("zone").touched),u.Kb(3),u.yc("ngForOf",c.zones),u.Kb(1),u.yc("ngIf",e.get("zone").touched&&e.get("zone").invalid),u.Kb(2),u.Pb("text-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),u.Kb(2),u.Pb("border-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid)}}function Xe(e,t){if(1&e){const e=u.ec();u.dc(0,"div",8),u.dc(1,"div",9),u.dc(2,"label",10),u.Qc(3,"Hajj Year"),u.cc(),u.Yb(4,"input",11),u.Oc(5,Qe,5,4,"div",12),u.cc(),u.dc(6,"div",9),u.dc(7,"label",13),u.Qc(8,"Status"),u.cc(),u.dc(9,"select",14),u.Oc(10,we,2,2,"option",15),u.cc(),u.Oc(11,Ce,2,1,"div",12),u.cc(),u.cc(),u.dc(12,"div",8),u.dc(13,"div",9),u.dc(14,"label",16),u.Qc(15,"Open Date"),u.cc(),u.Yb(16,"input",17),u.Oc(17,Ae,3,2,"div",12),u.cc(),u.cc(),u.Oc(18,Te,3,0,"div",18),u.Oc(19,ze,3,0,"div",19),u.Oc(20,je,19,12,"ng-container",20),u.dc(21,"div",21),u.dc(22,"button",22),u.nc("click",function(){return u.Ic(e),u.rc().addSeatAllocation()}),u.Qc(23," Add Seat Allocation "),u.cc(),u.cc()}if(2&e){const e=u.rc();u.Kb(2),u.Pb("text-danger",e.year.touched&&e.year.invalid),u.Kb(2),u.Pb("border-danger",e.year.touched&&e.year.invalid),u.Kb(1),u.yc("ngIf",e.year.touched&&e.year.invalid),u.Kb(2),u.Pb("text-danger",e.active.invalid&&e.active.touched),u.Kb(2),u.Pb("border-danger",e.active.invalid&&e.active.touched),u.Kb(1),u.yc("ngForOf",e.activeCollection),u.Kb(1),u.yc("ngIf",e.active.touched&&e.active.invalid),u.Kb(3),u.Pb("text-danger",e.dateOpened.touched&&e.dateOpened.invalid),u.Kb(2),u.Pb("border-danger",e.dateOpened.touched&&e.dateOpened.invalid),u.Kb(1),u.yc("ngIf",e.dateOpened.touched&&e.dateOpened.invalid),u.Kb(1),u.yc("ngIf",e.seatAllocationForms.length<1),u.Kb(1),u.yc("ngIf",e.seatAllocationForms.length>0),u.Kb(1),u.yc("ngForOf",e.seatAllocationForms)}}function Ve(e,t){1&e&&u.Yb(0,"app-loader")}let qe=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.notifications=c,this.dialogRef=n,this.fb=i,this.activeCollection=[!0,!1],this.zones=[],this.token=sessionStorage.getItem("token"),this.subscription=new r.a}ngOnInit(){this.initializeForm(),this.getZones()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}initializeForm(){this.hajjYearForm=this.fb.group({year:["",[o.z.required,o.z.pattern(/^20[2-9]{1}[0-9]{1}$/),ve.cannotContainSpace,ye.a.lessThanCurrentYear]],active:[!1],dateOpened:["",[o.z.required,ye.a.lessThanToday]],seatAllocations:new o.d([])})}submit(){const e={year:this.year.value,active:this.active.value,dateOpened:this.dateOpened.value,seatAllocations:[...this.seatAllocations.value]};this.notifications.prompt(`Open ${this.year.value} hajj?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.post(`${d.a.years}`,e,this.token).subscribe(e=>{console.log(e),this.notifications.successToast(`${e.year} hajj has been successfully opened.`),this.dialogRef.close(!0)}))})}getZones(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{const t=["00","01"];this.zones=e.filter(e=>!t.includes(e.code)).map(e=>(e.exempted=!1,e)),this.loader.hideLoader()})}get year(){return this.hajjYearForm.get("year")}get active(){return this.hajjYearForm.get("active")}get dateOpened(){return this.hajjYearForm.get("dateOpened")}get seatAllocations(){return this.hajjYearForm.get("seatAllocations")}get seatAllocationForms(){return this.hajjYearForm.get("seatAllocations").controls}addSeatAllocation(){if(23===this.seatAllocationForms.length)return this.notifications.alert("You' allocated seats to all centers.");this.seatAllocations.push(this.fb.group({zone:["",o.z.required],seatsAllocated:["",[o.z.required,o.z.pattern(/^[0-9]+$/),o.z.min(0)]]}))}removeSeatAllocation(e){const t=this.seatAllocations.controls.splice(e,1);this.zones.forEach(e=>{e._id===t[0].get("zone").value&&(e.exempted=!1,e.controlIndex=void 0)})}exemptZone(e,t){const c=this.zones.find(t=>t._id===e);if(c.exempted)return this.notifications.alert(`${c.name} has been allocated already`),void this.seatAllocationForms[t].reset("");let n=this.zones.find(e=>e.controlIndex===t);n&&(n.exempted=!1,n.controlIndex=void 0),c.exempted=!0,c.controlIndex=t}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(b.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.g),u.Xb(o.e))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-new-hajj-year"]],decls:14,vars:10,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-success","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-danger","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"row"],[1,"form-group","col-sm-12","col-md-6"],["for","year"],["formControlName","year","type","text",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","status"],["formControlName","active","id","status",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","dateOpened"],["formControlName","dateOpened","type","date","for","dateOpened",1,"form-control"],["class","row mx-auto my-3 alert alert-info",4,"ngIf"],["class","row mx-auto mt-3 mb-2 text-info",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mx-auto","row"],["type","button",1,"ml-auto","btn","btn-sm","btn-outline-success",3,"click"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[3,"value"],[1,"row","mx-auto","my-3","alert","alert-info"],[1,"row","mx-auto","mt-3","mb-2","text-info"],[1,"card","shadow-lg","p-3","mb-3",3,"formGroup"],[1,"mx-auto","col-12","row"],["type","button",1,"ml-auto","btn","btn-sm","btn-outline-danger",3,"click"],["for","zone"],["formControlName","zone","id","zone",1,"form-control",3,"change"],["selected","","hidden","","value",""],[3,"value","hidden",4,"ngFor","ngForOf"],["for","group.get('seatsAllocated')"],["formControlName","seatsAllocated","type","number",1,"form-control"],[3,"value","hidden"]],template:function(e,t){if(1&e&&(u.dc(0,"form",0),u.nc("ngSubmit",function(){return t.submit()}),u.dc(1,"p",1),u.Qc(2,"Open New Hajj Year"),u.cc(),u.dc(3,"mat-dialog-content"),u.Oc(4,Ie,1,0,"ng-container",2),u.cc(),u.dc(5,"mat-dialog-actions",3),u.dc(6,"button",4),u.Qc(7," Save "),u.cc(),u.dc(8,"button",5),u.Qc(9," Cancel "),u.cc(),u.cc(),u.Oc(10,Xe,24,19,"ng-template",null,6,u.Pc),u.Oc(12,Ve,1,0,"ng-template",null,7,u.Pc),u.cc()),2&e){const e=u.Gc(11),c=u.Gc(13);u.yc("formGroup",t.hajjYearForm),u.Kb(4),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",c)("ngIfElse",e),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible||t.hajjYearForm.valid),u.yc("disabled",t.loader.loaderVisible||t.hajjYearForm.invalid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.i,l.h,l.e,n.p,l.c,l.d,o.c,o.p,o.g,o.y,n.o,o.t,o.A,o.u,m.a],styles:[""]}),e})();function Ye(e,t){1&e&&u.Zb(0)}function De(e,t){if(1&e&&(u.dc(0,"option",25),u.Qc(1),u.cc()),2&e){const e=t.$implicit;u.yc("value",e._id)("hidden",e.exempted),u.Kb(1),u.Rc(e.name)}}function Ze(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Enrollment center is required "),u.cc())}function _e(e,t){if(1&e&&(u.dc(0,"div",26),u.Oc(1,Ze,2,0,"div",27),u.cc()),2&e){const e=u.rc().$implicit;u.Kb(1),u.yc("ngIf",e.get("zone").errors.required)}}function Be(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Seat allocated is required "),u.cc())}function He(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Enter a valid seat number "),u.cc())}function Ue(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){const e=u.rc(2).$implicit;u.Kb(1),u.Sc(" Seat allocation must be atleast ",e.get("seatsAllocated").errors.min.min,". ")}}function Je(e,t){if(1&e&&(u.dc(0,"div",26),u.Oc(1,Be,2,0,"div",27),u.Oc(2,He,2,0,"div",27),u.Oc(3,Ue,2,1,"div",27),u.cc()),2&e){const e=u.rc().$implicit;u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").errors.required),u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").errors.pattern),u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").errors.min)}}function We(e,t){if(1&e){const e=u.ec();u.bc(0),u.dc(1,"form",13),u.dc(2,"div",14),u.dc(3,"div",2),u.Qc(4),u.cc(),u.dc(5,"button",15),u.nc("click",function(){u.Ic(e);const c=t.index;return u.rc(2).removeSeatAllocation(c)}),u.Qc(6," Remove "),u.cc(),u.cc(),u.dc(7,"div",16),u.dc(8,"div",17),u.dc(9,"label",18),u.Qc(10,"Center"),u.cc(),u.dc(11,"select",19),u.nc("change",function(){u.Ic(e);const c=t.$implicit,n=t.index;return u.rc(2).exemptZone(c.get("zone").value,n)}),u.dc(12,"option",20),u.Qc(13,"Select center"),u.cc(),u.Oc(14,De,2,3,"option",21),u.cc(),u.Oc(15,_e,2,1,"div",22),u.cc(),u.dc(16,"div",17),u.dc(17,"label",23),u.Qc(18,"Seats"),u.cc(),u.Yb(19,"input",24),u.Oc(20,Je,4,3,"div",22),u.cc(),u.cc(),u.cc(),u.ac()}if(2&e){const e=t.$implicit,c=t.index,n=u.rc(2);u.Kb(1),u.yc("formGroup",e),u.Kb(3),u.Sc(" #",c+1," "),u.Kb(5),u.Pb("text-danger",e.get("zone").invalid&&e.get("zone").touched),u.Kb(2),u.Pb("border-danger",e.get("zone").invalid&&e.get("zone").touched),u.Kb(3),u.yc("ngForOf",n.zones),u.Kb(1),u.yc("ngIf",e.get("zone").touched&&e.get("zone").invalid),u.Kb(2),u.Pb("text-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),u.Kb(2),u.Pb("border-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),u.Kb(1),u.yc("ngIf",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid)}}function et(e,t){if(1&e){const e=u.ec();u.Oc(0,We,21,13,"ng-container",10),u.dc(1,"div",11),u.dc(2,"button",12),u.nc("click",function(){return u.Ic(e),u.rc().addSeatAllocation()}),u.Qc(3," Add Center "),u.cc(),u.cc()}if(2&e){const e=u.rc();u.yc("ngForOf",e.seatAllocationForms)}}function tt(e,t){1&e&&u.Yb(0,"app-loader")}let ct=(()=>{class e{constructor(e,t,c,n,i,a){this.data=e,this.fb=t,this.loader=c,this.notifications=n,this.dialogRef=i,this.dataService=a,this.zones=[],this.token=sessionStorage.getItem("token"),this.subscription=new r.a}ngOnInit(){this.zones=[...this.data.zones],this.initializeForm()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}initializeForm(){this.seatAllocations=new o.d([this.form])}submit(){const e={seatAllocations:this.seatAllocations.value};this.notifications.prompt("Are you sure you want to proceed?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.years}/add-allocation`,this.data.yearId,e,this.token).subscribe(e=>{this.loader.hideLoader(),this.notifications.successToast("Seats allocated to center successfully."),this.dialogRef.close(!0)}))})}addSeatAllocation(){if(this.seatAllocationForms.length===this.data.remainingSlots)return this.notifications.alert("You've allocated seats to all centers for this year.");this.seatAllocations.push(this.form)}removeSeatAllocation(e){const t=this.seatAllocations.controls.splice(e,1);this.zones.forEach(e=>{e._id===t[0].get("zone").value&&(e.exempted=!1,e.controlIndex=void 0)})}exemptZone(e,t){const c=this.zones.find(t=>t._id===e);if(c.exempted)return this.notifications.alert(`${c.name} has been allocated already`),void this.seatAllocationForms[t].reset("");let n=this.zones.find(e=>e.controlIndex===t);n&&(n.exempted=!1,n.controlIndex=void 0),c.exempted=!0,c.controlIndex=t}get seatAllocationForms(){return this.seatAllocations.controls}get form(){return this.fb.group({zone:["",o.z.required],seatsAllocated:["",[o.z.required,o.z.pattern(/^[0-9]+$/),o.z.min(0)]]})}get formValid(){return this.seatAllocationForms.every(e=>!0===e.valid)}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(l.a),u.Xb(o.e),u.Xb(b.a),u.Xb(h.a),u.Xb(l.g),u.Xb(g.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-add-seat-allocations"]],decls:17,vars:11,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"col-12","mx-auto","row"],[1,"mr-auto"],[1,"ml-auto","text-danger"],[4,"ngIf","ngIfThen","ngIfElse"],["show",""],["load",""],["align","end"],["type","submit",1,"btn-outline-success","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-danger","btn-sm","btn","ml-2",3,"disabled"],[4,"ngFor","ngForOf"],[1,"mx-auto","row","mb-2"],["type","button",1,"ml-auto","btn","btn-sm","btn-warning","text-white",3,"click"],[1,"card","p-3","mb-3","border-secondary",3,"formGroup"],[1,"mx-auto","col-12","row"],["type","button",1,"ml-auto","btn","btn-sm","btn-outline-danger",3,"click"],[1,"row"],[1,"form-group","col-sm-12","col-md-6"],["for","zone"],["formControlName","zone","id","zone",1,"form-control",3,"change"],["selected","","hidden","","value",""],[3,"value","hidden",4,"ngFor","ngForOf"],["class","text-danger small mt-1",4,"ngIf"],["for","group.get('seatsAllocated')"],["formControlName","seatsAllocated","type","number",1,"form-control"],[3,"value","hidden"],[1,"text-danger","small","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e&&(u.dc(0,"form",0),u.nc("ngSubmit",function(){return t.submit()}),u.dc(1,"div",1),u.dc(2,"div",2),u.Qc(3," Add Seat Allocations "),u.cc(),u.dc(4,"div",3),u.Qc(5),u.cc(),u.cc(),u.dc(6,"mat-dialog-content"),u.Oc(7,Ye,1,0,"ng-container",4),u.cc(),u.Oc(8,et,4,1,"ng-template",null,5,u.Pc),u.Oc(10,tt,1,0,"ng-template",null,6,u.Pc),u.dc(12,"mat-dialog-actions",7),u.dc(13,"button",8),u.Qc(14," Save "),u.cc(),u.dc(15,"button",9),u.Qc(16," Cancel "),u.cc(),u.cc(),u.cc()),2&e){const e=u.Gc(9),c=u.Gc(11);u.yc("formGroup",t.seatAllocations),u.Kb(5),u.Sc(" Unallocated centers: ",t.data.remainingSlots," "),u.Kb(2),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",c)("ngIfElse",e),u.Kb(6),u.Pb("magnifyText",!t.loader.loaderVisible&&t.formValid),u.yc("disabled",t.loader.loaderVisible||!t.formValid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.i,l.h,l.e,n.p,l.c,l.d,n.o,o.y,o.p,o.g,o.t,o.A,o.c,o.u,m.a],styles:[".mat-dialog-title[_ngcontent-%COMP%]{display:inline-flex}"]}),e})();function nt(e,t){1&e&&u.Zb(0)}function it(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Seat allocated is required "),u.cc())}function at(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," Enter a valid seat number "),u.cc())}function ot(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Seat allocation must be atleast ",e.errors.min.min,". ")}}function st(e,t){if(1&e&&(u.dc(0,"div",12),u.Oc(1,it,2,0,"div",13),u.Oc(2,at,2,0,"div",13),u.Oc(3,ot,2,1,"div",13),u.cc()),2&e){u.rc();const e=u.Gc(4);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.pattern),u.Kb(1),u.yc("ngIf",e.errors.min)}}function rt(e,t){if(1&e){const e=u.ec();u.dc(0,"div",7),u.dc(1,"label",8),u.Qc(2,"New Seat Number"),u.cc(),u.dc(3,"input",9,10),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().seatNumber=t}),u.cc(),u.Oc(5,st,4,3,"div",11),u.cc()}if(2&e){const e=u.Gc(4),t=u.rc();u.Kb(1),u.Pb("text-danger",e.touched&&e.invalid),u.Kb(2),u.Pb("border-danger",e.touched&&e.invalid),u.yc("ngModel",t.seatNumber),u.Kb(2),u.yc("ngIf",e.touched&&e.invalid)}}function dt(e,t){1&e&&u.Yb(0,"app-loader")}let lt=(()=>{class e{constructor(e,t,c,n,i){this.data=e,this.loader=t,this.dataService=c,this.notifications=n,this.dialogRef=i,this.seatNumber="",this.token=sessionStorage.getItem("token"),this.subscription=new r.a}ngOnInit(){console.log(this.data),this.seatNumber=this.data.zone.seatsAllocated}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}saveChanges(){this.loader.showLoader();const e={zone:this.data.zone._id,seatsAllocated:this.seatNumber};this.notifications.prompt("Are you sure you want to save these changes?").then(t=>{t.isConfirmed&&(this.subscription=this.dataService.update(`${d.a.years}/edit-seat-allocation`,this.data.yearId,e,this.token).subscribe(e=>{this.loader.hideLoader(),this.notifications.successToast("Changes have been saved successfully."),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(l.a),u.Xb(b.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.g))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-edit-seat"]],decls:14,vars:12,consts:[["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["show",""],["load",""],["align","end"],["type","button",1,"btn-outline-success","btn-sm","btn",3,"disabled","click"],["type","button","matDialogClose","",1,"btn-outline-danger","btn-sm","btn","ml-2",3,"disabled"],[1,"form-group"],["for","seatNumber"],["type","number","id","seatNumber","name","seatsAllocated","required","","min","0","pattern","^[0-9]+$",1,"form-control",3,"ngModel","ngModelChange"],["seatsAllocated","ngModel"],["class","text-danger small mt-1",4,"ngIf"],[1,"text-danger","small","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e&&(u.dc(0,"p",0),u.Qc(1),u.sc(2,"titlecase"),u.cc(),u.dc(3,"mat-dialog-content"),u.Oc(4,nt,1,0,"ng-container",1),u.cc(),u.Oc(5,rt,6,6,"ng-template",null,2,u.Pc),u.Oc(7,dt,1,0,"ng-template",null,3,u.Pc),u.dc(9,"mat-dialog-actions",4),u.dc(10,"button",5),u.nc("click",function(){return t.saveChanges()}),u.Qc(11," Save "),u.cc(),u.dc(12,"button",6),u.Qc(13," Cancel "),u.cc(),u.cc()),2&e){const e=u.Gc(6),c=u.Gc(8);u.Kb(1),u.Sc("Edit Seats: ",u.tc(2,10,t.data.zone.name),""),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",c)("ngIfElse",e),u.Kb(6),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[l.h,l.e,n.p,l.c,l.d,o.u,o.c,o.x,o.v,o.p,o.s,m.a],pipes:[n.y],styles:[""]}),e})();function ut(e,t){1&e&&u.Zb(0)}function bt(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function gt(e,t){1&e&&u.Zb(0)}function ht(e,t){if(1&e&&u.Oc(0,gt,1,0,"ng-container",10),2&e){const e=u.rc(),t=u.Gc(23),c=u.Gc(21);u.yc("ngIf",e.history.length>0)("ngIfThen",t)("ngIfElse",c)}}function mt(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function ft(e,t){if(1&e&&(u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.Qc(7),u.cc(),u.dc(8,"td"),u.Qc(9),u.cc(),u.dc(10,"td"),u.Qc(11),u.cc(),u.dc(12,"td"),u.Qc(13),u.sc(14,"date"),u.cc(),u.cc(),u.cc()),2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc(10*(n.p-1)+(e+1)),u.Kb(2),u.Rc(c.previousSeatNumber),u.Kb(2),u.Rc(c.newSeatNumber),u.Kb(2),u.Rc(c.difference),u.Kb(2),u.Rc(c.zone.name),u.Kb(2),u.Rc(c.date?u.uc(14,6,c.date,"medium"):"Unavailable")}}const pt=function(e){return{itemsPerPage:10,currentPage:e}};function vt(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",19),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",20),u.Qc(5,"Previous"),u.cc(),u.dc(6,"th",21),u.Qc(7,"Current"),u.cc(),u.dc(8,"th",22),u.Qc(9,"Update"),u.cc(),u.dc(10,"th",22),u.Qc(11,"Center"),u.cc(),u.dc(12,"th",23),u.Qc(13,"Date Modified"),u.cc(),u.cc(),u.cc(),u.Oc(14,ft,15,9,"tbody",24),u.sc(15,"paginate"),u.sc(16,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.history),u.Kb(2),u.yc("appSort",e.history),u.Kb(2),u.yc("appSort",e.history),u.Kb(6),u.yc("appSort",e.history),u.Kb(2),u.yc("ngForOf",u.uc(15,5,u.uc(16,8,e.history,e.searchText),u.Cc(11,pt,e.p)))}}let yt=(()=>{class e{constructor(e,t,c,n,i){this.data=e,this.loader=t,this.dataService=c,this.dialog=n,this.dialogRef=i,this.token=sessionStorage.getItem("token"),this.subscription=new r.a,this.history=[],this.searchText="",this.p=1}ngOnInit(){this.getHistory()}ngOnDestroy(){this.subscription.unsubscribe(),this.loader.hideLoader()}getHistory(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.years+"/updates",this.token,this.data).subscribe(e=>{this.history=e,this.loader.hideLoader()})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(l.a),u.Xb(b.a),u.Xb(g.a),u.Xb(l.b),u.Xb(l.g))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-view-update-history"]],decls:27,vars:4,consts:[["mat-dialog-title","",1,"col-12","mx-auto","row"],[1,"mr-auto"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["align","end"],["type","button","matDialogClose","",1,"btn-danger","btn-sm","btn","ml-2"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","previousSeatNumber",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","newSeatNumber",1,"sort",3,"appSort"],["scope","col",1,"sort"],["scope","col","data-order","desc","data-name","date",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(u.dc(0,"div",0),u.dc(1,"div",1),u.Qc(2," Update History "),u.cc(),u.cc(),u.dc(3,"mat-dialog-content"),u.dc(4,"div",2),u.dc(5,"div",3),u.dc(6,"div",4),u.dc(7,"div",5),u.dc(8,"h6",6),u.Qc(9,"HISTORY"),u.cc(),u.dc(10,"input",7),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(11,"div",8),u.dc(12,"table",9),u.Oc(13,ut,1,0,"ng-container",10),u.cc(),u.dc(14,"div",11),u.dc(15,"pagination-controls",12),u.nc("pageChange",function(e){return t.p=e}),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(16,bt,5,0,"ng-template",null,13,u.Pc),u.Oc(18,ht,1,3,"ng-template",null,14,u.Pc),u.Oc(20,mt,4,0,"ng-template",null,15,u.Pc),u.Oc(22,vt,17,13,"ng-template",null,16,u.Pc),u.cc(),u.dc(24,"mat-dialog-actions",17),u.dc(25,"button",18),u.Qc(26," Close "),u.cc(),u.cc()),2&e){const e=u.Gc(17),c=u.Gc(19);u.Kb(10),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[l.h,l.e,o.c,o.p,o.s,n.p,i.c,l.c,l.d,m.a,N.a,n.o],pipes:[i.b,F.a,n.f],styles:[""]}),e})();var It=c("Qu3c");function St(e,t){1&e&&(u.dc(0,"div",19),u.dc(1,"h6"),u.Qc(2,"No seats allocated yet, click add allocations to add allocations."),u.cc(),u.cc())}function xt(e,t){1&e&&(u.dc(0,"div",20),u.dc(1,"h6"),u.Qc(2,"No seats were allocated and registration closed."),u.cc(),u.cc())}function Ot(e,t){1&e&&(u.dc(0,"div",21),u.dc(1,"h6"),u.Qc(2,"Seat Allocations"),u.cc(),u.cc())}function Kt(e,t){if(1&e){const e=u.ec();u.bc(0),u.dc(1,"div",22),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc().editZoneSeats(c)}),u.dc(2,"div",23),u.dc(3,"h5",24),u.Qc(4),u.cc(),u.dc(5,"p",25),u.Qc(6),u.cc(),u.cc(),u.cc(),u.ac()}if(2&e){const e=t.$implicit;u.Kb(4),u.Sc(" ",e.zone.name," "),u.Kb(2),u.Sc(" Seats:\xa0\xa0\xa0",e.seatsAllocated," ")}}function Qt(e,t){if(1&e){const e=u.ec();u.dc(0,"button",26),u.nc("click",function(){return u.Ic(e),u.rc().addSeatAllocation()}),u.Qc(1," Add Allocation "),u.cc()}}let wt=(()=>{class e{constructor(e,t,c,n,i){this.data=e,this.loader=t,this.dataService=c,this.dialog=n,this.dialogRef=i,this.token=sessionStorage.getItem("token"),this.zones=[],this.subscription=new r.a}ngOnInit(){this.allowAddAllocation()&&this.getZones()}ngOnDestroy(){this.subscription.unsubscribe(),this.loader.hideLoader()}allowAddAllocation(){return(new Date).getFullYear()<=parseInt(this.data.year)&&this.data.seatAllocations.length<23}get totalSeats(){return this.data.seatAllocations.reduce((e,t)=>e+t.seatsAllocated,0)}getZones(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{const t=["00","01"];this.zones=e.filter(e=>!t.includes(e.code)).map(e=>this.data.seatAllocations.find(t=>t.zone._id===e._id)?(e.exempted=!0,e):(e.exempted=!1,e)),this.loader.hideLoader()})}getYearDetails(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.years,this.token,this.data._id).subscribe(e=>{this.data.seatAllocations.length=0,this.data.seatAllocations=[...e.seatAllocations],console.log(this.data),this.loader.hideLoader()})}addSeatAllocation(){window.scroll(0,0),this.dialog.open(ct,{width:"42rem",disableClose:!0,data:{zones:this.zones,yearId:this.data._id,remainingSlots:23-this.data.seatAllocations.length}}).afterClosed().subscribe(e=>{e&&this.getYearDetails()})}viewEditHistory(){window.scroll(0,0),this.dialog.open(yt,{width:"70rem",disableClose:!0,data:this.data._id})}editZoneSeats(e){window.scroll(0,0),this.dialog.open(lt,{width:"25rem",disableClose:!0,data:{zone:{seatsAllocated:e.seatsAllocated,name:e.zone.name,_id:e.zone._id},yearId:this.data._id}}).afterClosed().subscribe(e=>{e&&this.getYearDetails()})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(l.a),u.Xb(b.a),u.Xb(g.a),u.Xb(l.b),u.Xb(l.g))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-view-hajj-year"]],decls:38,vars:16,consts:[["mat-dialog-title","",1,"col-12","mx-auto","row"],[1,"mr-auto"],[1,"ml-auto","text-success"],[1,"row"],[1,"form-group","col-sm-12","col-md-6"],["for","year"],["type","text","disabled","",1,"form-control",3,"value"],["for","status"],["for","dateOpened"],["for","lastClosed"],[1,"btn","btn-primary","btn-sm",3,"click"],["class","row mx-auto my-3 alert alert-info",4,"ngIf"],["class","row mx-auto my-3 alert alert-danger",4,"ngIf"],["class","row mx-auto my-2 text-secondary",4,"ngIf"],[1,"cardList","py-2"],[4,"ngFor","ngForOf"],["align","end"],["type","button","class","btn-success btn-sm btn mr-2",3,"click",4,"ngIf"],["type","button","matDialogClose","",1,"btn-danger","btn-sm","btn","ml-2"],[1,"row","mx-auto","my-3","alert","alert-info"],[1,"row","mx-auto","my-3","alert","alert-danger"],[1,"row","mx-auto","my-2","text-secondary"],["matTooltip","Click to edit","matTooltipPosition","above",1,"card","cardListItem","mb-3","border-success",2,"padding","0!important",3,"click"],[1,"card-body",2,"padding","1rem!important"],[1,"card-title","text-success","mb-2"],[1,"card-text"],["type","button",1,"btn-success","btn-sm","btn","mr-2",3,"click"]],template:function(e,t){1&e&&(u.dc(0,"div",0),u.dc(1,"div",1),u.Qc(2," Hajj Year Details "),u.cc(),u.dc(3,"div",2),u.Qc(4),u.cc(),u.cc(),u.dc(5,"mat-dialog-content"),u.dc(6,"div",3),u.dc(7,"div",4),u.dc(8,"label",5),u.Qc(9,"Hajj Year"),u.cc(),u.Yb(10,"input",6),u.cc(),u.dc(11,"div",4),u.dc(12,"label",7),u.Qc(13,"Status"),u.cc(),u.Yb(14,"input",6),u.cc(),u.cc(),u.dc(15,"div",3),u.dc(16,"div",4),u.dc(17,"label",8),u.Qc(18,"Date Opened"),u.cc(),u.Yb(19,"input",6),u.sc(20,"date"),u.cc(),u.dc(21,"div",4),u.dc(22,"label",9),u.Qc(23,"Last Closed"),u.cc(),u.Yb(24,"input",6),u.sc(25,"date"),u.cc(),u.dc(26,"div",4),u.dc(27,"button",10),u.nc("click",function(){return t.viewEditHistory()}),u.Qc(28," View update history "),u.cc(),u.cc(),u.cc(),u.Oc(29,St,3,0,"div",11),u.Oc(30,xt,3,0,"div",12),u.Oc(31,Ot,3,0,"div",13),u.dc(32,"div",14),u.Oc(33,Kt,7,2,"ng-container",15),u.cc(),u.cc(),u.dc(34,"mat-dialog-actions",16),u.Oc(35,Qt,2,0,"button",17),u.dc(36,"button",18),u.Qc(37," Close "),u.cc(),u.cc()),2&e&&(u.Kb(4),u.Sc(" Total Slots: ",t.totalSeats," "),u.Kb(6),u.yc("value",t.data.year),u.Kb(4),u.yc("value",t.data.active?"Active":"Inactive"),u.Kb(5),u.yc("value",u.uc(20,10,t.data.dateOpened,"longDate")),u.Kb(5),u.yc("value",u.uc(25,13,t.data.lastClosed,"long")),u.Kb(5),u.yc("ngIf",t.data.seatAllocations.length<1&&t.allowAddAllocation()),u.Kb(1),u.yc("ngIf",t.data.seatAllocations.length<1&&!t.allowAddAllocation()),u.Kb(1),u.yc("ngIf",t.data.seatAllocations.length>0),u.Kb(2),u.yc("ngForOf",t.data.seatAllocations),u.Kb(2),u.yc("ngIf",t.allowAddAllocation()||t.loader.loaderVisible))},directives:[l.h,l.e,n.p,n.o,l.c,l.d,It.a],pipes:[n.f],styles:[".cardList[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start}.cardList[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{box-sizing:border-box}.cardList[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:32px}.cardListItem[_ngcontent-%COMP%]{flex:0 1 calc(25% - 32px);margin-bottom:.5rem;padding:.2rem!important;transition:.5s}.cardListItem[_ngcontent-%COMP%]:hover{background-color:#10b759;cursor:pointer}.cardListItem[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#fff!important}.mat-dialog-title[_ngcontent-%COMP%]{display:inline-flex}"]}),e})();function kt(e,t){1&e&&u.Zb(0)}function Ct(e,t){if(1&e&&(u.dc(0,"option",28),u.Qc(1),u.cc()),2&e){const e=t.$implicit;u.yc("value",e),u.Kb(1),u.Sc("Show ",e," Items")}}function Pt(e,t){if(1&e){const e=u.ec();u.dc(0,"div",23),u.dc(1,"div",24),u.dc(2,"select",25),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().pageSize=t})("change",function(){return u.Ic(e),u.rc().onPageSizeChange()}),u.Oc(3,Ct,2,2,"option",26),u.cc(),u.cc(),u.dc(4,"pagination-controls",27),u.nc("pageChange",function(t){return u.Ic(e),u.rc().onNavigate(t)}),u.cc(),u.cc()}if(2&e){const e=u.rc();u.Kb(2),u.yc("ngModel",e.pageSize),u.Kb(1),u.yc("ngForOf",e.pages)}}function Lt(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function At(e,t){1&e&&u.Zb(0)}function Tt(e,t){if(1&e&&u.Oc(0,At,1,0,"ng-container",17),2&e){const e=u.rc(),t=u.Gc(36),c=u.Gc(34);u.yc("ngIf",e.years.length>0)("ngIfThen",t)("ngIfElse",c)}}function zt(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function Rt(e,t){1&e&&(u.dc(0,"th"),u.Qc(1,"Actions"),u.cc())}function Gt(e,t){1&e&&(u.dc(0,"th"),u.Qc(1,"Status"),u.cc())}function Mt(e,t){if(1&e&&(u.dc(0,"span"),u.Qc(1),u.cc()),2&e){const e=u.rc().$implicit;u.Pb("text-success",e.active)("text-danger",!e.active),u.Kb(1),u.Sc(" ",e.active?"Active":"Closed"," ")}}function Nt(e,t){if(1&e){const e=u.ec();u.dc(0,"button",39),u.nc("click",function(){u.Ic(e);const t=u.rc().$implicit;return u.rc(2).reopenHajjYear(t)}),u.Qc(1," Reopen Year "),u.cc()}}function Ft(e,t){if(1&e){const e=u.ec();u.dc(0,"button",40),u.nc("click",function(){u.Ic(e);const t=u.rc().$implicit;return u.rc(2).closeHajjYear(t)}),u.Qc(1," Close Year "),u.cc()}}function Et(e,t){if(1&e){const e=u.ec();u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.Qc(7),u.sc(8,"date"),u.cc(),u.dc(9,"td"),u.Qc(10),u.sc(11,"date"),u.cc(),u.dc(12,"td"),u.Oc(13,Mt,2,5,"span",35),u.Qc(14," \xa0 \xa0 "),u.dc(15,"button",36),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).viewHajjYear(c)}),u.Qc(16," View "),u.cc(),u.Qc(17," \xa0 \xa0 "),u.Oc(18,Nt,2,0,"button",37),u.Oc(19,Ft,2,0,"button",38),u.cc(),u.cc(),u.cc()}if(2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc((n.p-1)*n.pageSize+(e+1)),u.Kb(2),u.Rc(c.year),u.Kb(2),u.Rc(u.uc(8,7,c.dateOpened,"mediumDate")),u.Kb(3),u.Rc(u.uc(11,10,c.lastClosed,"medium")),u.Kb(3),u.yc("ngIf",""===n.active),u.Kb(5),u.yc("ngIf",n.currentYear<=c.year&&!c.active),u.Kb(1),u.yc("ngIf","active"===n.active)}}const $t=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function jt(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",29),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",30),u.Qc(5,"Year"),u.cc(),u.dc(6,"th",31),u.Qc(7,"Open Date"),u.cc(),u.dc(8,"th",32),u.Qc(9,"Last Closed Date"),u.cc(),u.Oc(10,Rt,2,0,"th",33),u.Oc(11,Gt,2,0,"th",33),u.cc(),u.cc(),u.Oc(12,Et,20,13,"tbody",34),u.sc(13,"paginate"),u.sc(14,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.years),u.Kb(2),u.yc("appSort",e.years),u.Kb(2),u.yc("appSort",e.years),u.Kb(2),u.yc("appSort",e.years),u.Kb(2),u.yc("ngIf","active"===e.active),u.Kb(1),u.yc("ngIf",""===e.active),u.Kb(1),u.yc("ngForOf",u.uc(13,7,u.uc(14,10,e.years,e.searchText),u.Ec(13,$t,e.pageSize,e.p,e.totalItems)))}}let Xt=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.currentYear=pe(new Date).format("YYYY"),this.years=[],this.p=1,this.pageSize=5,this.pages=[5,10,15,20],this.totalItems=0,this.active="active",this.display="Active Year",this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.tabClick("active")}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}tabClick(e){let t;switch(this.p=1,this.pageSize=5,this.active=e,e){case"active":t="get-active",this.display="Active Year";break;case"inactive":t="get-inactive",this.display="Closed Years";break;default:t="",this.display="All Years"}this.getYears(t)}onPageSizeChange(){this.onNavigate(1)}onNavigate(e){let t;switch(e&&(this.p=e),this.active){case"active":t="get-active";break;case"inactive":t="get-inactive";break;default:t=""}this.getYears(t,this.pageSize,this.p)}getYears(e,t,c){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.years}/${e}`,this.token,null,{pageSize:t,page:c}).subscribe(e=>{this.years=[...e.years],this.totalItems=e.totalDocs,this.loader.hideLoader()})}closeHajjYear(e){this.notifications.prompt(`Close ${e.year} hajj ?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.years}/close-hajj-year/${e._id}`,"",{},this.token).subscribe(e=>{this.notifications.successToast(`${e.year} hajj has been successfully closed.`),this.tabClick("inactive")}))})}reopenHajjYear(e){this.notifications.prompt(`Reopen ${e.year} hajj ?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.years}/reopen-hajj-year/${e._id}`,"",{},this.token).subscribe(e=>{this.notifications.successToast(`${e.year} hajj has been successfully reopened.`),this.tabClick("active")}))})}openNewHajjYear(){window.scroll(0,0),this.dialog.open(qe,{width:"42rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.tabClick(this.active)})}viewHajjYear(e){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.years}/${e._id}`,this.token).subscribe(e=>{this.loader.hideLoader(),window.scroll(0,0),this.dialog.open(wt,{width:"50rem",data:e,disableClose:!0}).afterClosed().subscribe(e=>{e&&this.tabClick(this.active)})})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(M.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.b))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-hajj-year"]],decls:37,vars:18,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12",2,"text-align","center"],["role","group",1,"btn-group","mb-4"],["type","button",1,"magnifyText","btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"disabled","click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],["class","col-12 mx-auto mt-3",4,"ngIf"],["load",""],["show",""],["noData",""],["tableData",""],[1,"col-12","mx-auto","mt-3"],[1,"float-left"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],[3,"value"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","year",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","dateOpened",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","lastClosed",1,"sort",3,"appSort"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"text-success","text-danger",4,"ngIf"],["type","button",1,"btn","magnifyText","btn-outline-success","btn-sm",3,"click"],["type","button","class","btn magnifyText btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","button","class","btn magnifyText btn-danger btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","magnifyText","btn-danger","btn-sm",3,"click"]],template:function(e,t){if(1&e&&(u.dc(0,"nav",0),u.dc(1,"ol",1),u.dc(2,"li",2),u.dc(3,"a",3),u.Qc(4,"Hajj Years"),u.cc(),u.cc(),u.dc(5,"li",4),u.Qc(6),u.cc(),u.cc(),u.cc(),u.dc(7,"div",5),u.dc(8,"div",6),u.dc(9,"button",7),u.nc("click",function(){return t.tabClick("active")}),u.Qc(10," Active "),u.cc(),u.dc(11,"button",7),u.nc("click",function(){return t.tabClick("inactive")}),u.Qc(12," Closed "),u.cc(),u.dc(13,"button",7),u.nc("click",function(){return t.tabClick("")}),u.Qc(14," All Years "),u.cc(),u.cc(),u.cc(),u.dc(15,"div",8),u.dc(16,"div",9),u.dc(17,"div",10),u.dc(18,"div",11),u.dc(19,"h6",12),u.Qc(20,"HAJJ YEARS MASTER LIST"),u.cc(),u.dc(21,"button",13),u.nc("click",function(){return t.openNewHajjYear()}),u.dc(22,"span"),u.Qc(23,"Open New Hajj Year"),u.cc(),u.cc(),u.dc(24,"input",14),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(25,"div",15),u.dc(26,"table",16),u.Oc(27,kt,1,0,"ng-container",17),u.cc(),u.Oc(28,Pt,5,2,"div",18),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(29,Lt,5,0,"ng-template",null,19,u.Pc),u.Oc(31,Tt,1,3,"ng-template",null,20,u.Pc),u.Oc(33,zt,4,0,"ng-template",null,21,u.Pc),u.Oc(35,jt,15,17,"ng-template",null,22,u.Pc)),2&e){const e=u.Gc(30),c=u.Gc(32);u.Kb(6),u.Rc(t.display),u.Kb(3),u.Pb("btn-active","active"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(2),u.Pb("btn-active","inactive"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(2),u.Pb("btn-active",""===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(8),u.Pb("magnifyText",!t.loader.loaderVisible&&"active"===t.active),u.yc("disabled",t.loader.loaderVisible||"active"!==t.active),u.Kb(3),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c),u.Kb(1),u.yc("ngIf",t.years.length>0)}},directives:[o.c,o.p,o.s,n.p,o.y,n.o,i.c,o.t,o.A,m.a,N.a],pipes:[i.b,F.a,n.f],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function Vt(e,t){1&e&&u.Zb(0)}function qt(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function Yt(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Bank name must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function Dt(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" Bank name must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function Zt(e,t){if(1&e&&(u.dc(0,"div",14),u.Oc(1,qt,2,0,"div",15),u.Oc(2,Yt,2,1,"div",15),u.Oc(3,Dt,2,1,"div",15),u.cc()),2&e){u.rc();const e=u.Gc(4);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function _t(e,t){if(1&e){const e=u.ec();u.dc(0,"div",9),u.dc(1,"label",10),u.Qc(2,"Bank Name"),u.cc(),u.dc(3,"input",11,12),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().bankName=t}),u.cc(),u.Oc(5,Zt,4,3,"div",13),u.cc()}if(2&e){const e=u.Gc(4),t=u.rc();u.Kb(1),u.Pb("text-danger",e.touched&&e.invalid),u.Kb(2),u.Pb("error-control",e.touched&&e.invalid),u.yc("ngModel",t.bankName),u.Kb(2),u.yc("ngIf",e.touched&&e.invalid)}}function Bt(e,t){1&e&&(u.dc(0,"app-loader"),u.Qc(1,"Please wait..."),u.cc())}let Ht=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.action="Add New Bank",this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.bankName=""}ngOnInit(){this.data&&(this.action="Edit Bank",this.bankName=this.data.name)}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt(this.data?"Save changes?":"Create bank?").then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=d.a.banks;this.data?this.updateExisting(this.data._id,t,e):this.saveNewBank(e,t)}})}saveNewBank(e,t){this.subscription=this.dataService.post(t,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} created successfully.`),this.loader.hideLoader(),this.dialogRef.close(!0)})}updateExisting(e,t,c){this.subscription=this.dataService.update(t,e,c,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} successfully updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(b.a),u.Xb(g.a),u.Xb(l.g),u.Xb(h.a),u.Xb(l.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-edit-bank"]],decls:15,vars:10,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","5","maxlength","255","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=u.ec();u.dc(0,"form",0,1),u.nc("ngSubmit",function(){u.Ic(e);const c=u.Gc(1);return t.submit(c.value)}),u.dc(2,"p",2),u.Qc(3),u.cc(),u.dc(4,"mat-dialog-content"),u.Oc(5,Vt,1,0,"ng-container",3),u.cc(),u.dc(6,"mat-dialog-actions",4),u.dc(7,"button",5),u.Qc(8," Save "),u.cc(),u.dc(9,"button",6),u.Qc(10," Cancel "),u.cc(),u.cc(),u.Oc(11,_t,6,6,"ng-template",null,7,u.Pc),u.Oc(13,Bt,2,0,"ng-template",null,8,u.Pc),u.cc()}if(2&e){const e=u.Gc(1),c=u.Gc(12),n=u.Gc(14);u.Kb(3),u.Rc(t.action),u.Kb(2),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible||e.valid),u.yc("disabled",t.loader.loaderVisible||e.invalid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.p,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function Ut(e,t){1&e&&u.Zb(0)}function Jt(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function Wt(e,t){1&e&&u.Zb(0)}function ec(e,t){if(1&e&&u.Oc(0,Wt,1,0,"ng-container",17),2&e){const e=u.rc(),t=u.Gc(35),c=u.Gc(33);u.yc("ngIf",e.banks.length>0)("ngIfThen",t)("ngIfElse",c)}}function tc(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function cc(e,t){if(1&e){const e=u.ec();u.dc(0,"button",30),u.nc("click",function(){u.Ic(e);const t=u.rc().$implicit;return u.rc(2).activateBank(t)}),u.dc(1,"span"),u.Qc(2,"Activate"),u.cc(),u.cc()}if(2&e){const e=u.rc(3);u.Pb("magnifyText",!e.loader.loaderVisible),u.yc("disabled",e.loader.loaderVisible)}}function nc(e,t){if(1&e){const e=u.ec();u.dc(0,"button",31),u.nc("click",function(){u.Ic(e);const t=u.rc().$implicit;return u.rc(2).deactivateBank(t)}),u.dc(1,"span"),u.Qc(2,"Deactivate"),u.cc(),u.cc()}if(2&e){const e=u.rc(3);u.Pb("magnifyText",!e.loader.loaderVisible),u.yc("disabled",e.loader.loaderVisible)}}function ic(e,t){if(1&e){const e=u.ec();u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.dc(7,"button",27),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).editBank(c)}),u.Qc(8," Edit Bank "),u.cc(),u.Oc(9,cc,3,3,"button",28),u.Oc(10,nc,3,3,"button",29),u.cc(),u.cc(),u.cc()}if(2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc(10*(n.p-1)+(e+1)),u.Kb(2),u.Rc(c.name),u.Kb(4),u.yc("ngIf","inactive"===n.active),u.Kb(1),u.yc("ngIf","active"===n.active)}}const ac=function(e){return{itemsPerPage:10,currentPage:e}};function oc(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",24),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",25),u.Qc(5,"Name"),u.cc(),u.dc(6,"th"),u.Qc(7,"Actions"),u.cc(),u.cc(),u.cc(),u.Oc(8,ic,11,4,"tbody",26),u.sc(9,"paginate"),u.sc(10,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.banks),u.Kb(2),u.yc("appSort",e.banks),u.Kb(4),u.yc("ngForOf",u.uc(9,3,u.uc(10,6,e.banks,e.searchText),u.Cc(9,ac,e.p)))}}let sc=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.active="active",this.display="Active Banks",this.banks=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getBanks()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}tabClick(e){let t;switch(this.p=1,this.active=e,e){case"active":t=!1,this.display="Active Banks";break;case"inactive":t=!0,this.display="Inactive Banks"}this.getBanks(t)}getBanks(e){this.loader.showLoader();let t=`${d.a.banks}`;e&&(t=`${d.a.banks}/inactive`),this.subscription=this.dataService.get(t,this.token).subscribe(e=>{this.banks=[...e],this.loader.hideLoader()})}deactivateBank(e){this.notifications.prompt(`Are you sure you want to deactivate ${e.name}?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.banks}/deactivate`,e._id,{},this.token).subscribe(e=>{this.notifications.successToast("Bank successfully deactivated."),console.log(e),this.tabClick("active")}))})}activateBank(e){this.notifications.prompt(`Are you sure you want to activate ${e.name}?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.banks}/activate`,e._id,{},this.token).subscribe(e=>{this.notifications.successToast("Bank successfully activated."),this.tabClick("inactive")}))})}editBank(e){window.scroll(0,0),this.dialog.open(Ht,{data:e||null,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getBanks()})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(M.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.b))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-banks"]],decls:36,vars:13,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12",2,"text-align","center"],["role","group",1,"btn-group","mb-4"],["type","button",1,"magnifyText","btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"disabled","click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"],["class","btn btn-outline-success ml-4",3,"magnifyText","disabled","click",4,"ngIf"],["class","btn btn-danger ml-4",3,"magnifyText","disabled","click",4,"ngIf"],[1,"btn","btn-outline-success","ml-4",3,"disabled","click"],[1,"btn","btn-danger","ml-4",3,"disabled","click"]],template:function(e,t){if(1&e&&(u.dc(0,"nav",0),u.dc(1,"ol",1),u.dc(2,"li",2),u.dc(3,"a",3),u.Qc(4,"Banks"),u.cc(),u.cc(),u.dc(5,"li",4),u.Qc(6,"All Banks"),u.cc(),u.cc(),u.cc(),u.dc(7,"div",5),u.dc(8,"div",6),u.dc(9,"button",7),u.nc("click",function(){return t.tabClick("active")}),u.Qc(10," Active "),u.cc(),u.dc(11,"button",7),u.nc("click",function(){return t.tabClick("inactive")}),u.Qc(12," Inactive "),u.cc(),u.cc(),u.cc(),u.dc(13,"div",8),u.dc(14,"div",9),u.dc(15,"div",10),u.dc(16,"div",11),u.dc(17,"h6",12),u.Qc(18,"BANKS MASTER LIST"),u.cc(),u.dc(19,"button",13),u.nc("click",function(){return t.editBank()}),u.dc(20,"span"),u.Qc(21,"Add New Bank"),u.cc(),u.cc(),u.dc(22,"input",14),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(23,"div",15),u.dc(24,"table",16),u.Oc(25,Ut,1,0,"ng-container",17),u.cc(),u.dc(26,"div",18),u.dc(27,"pagination-controls",19),u.nc("pageChange",function(e){return t.p=e}),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(28,Jt,5,0,"ng-template",null,20,u.Pc),u.Oc(30,ec,1,3,"ng-template",null,21,u.Pc),u.Oc(32,tc,4,0,"ng-template",null,22,u.Pc),u.Oc(34,oc,11,11,"ng-template",null,23,u.Pc)),2&e){const e=u.Gc(29),c=u.Gc(31);u.Kb(9),u.Pb("btn-active","active"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(2),u.Pb("btn-active","inactive"===t.active),u.yc("disabled",t.loader.loaderVisible),u.Kb(8),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible),u.Kb(3),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[o.c,o.p,o.s,n.p,i.c,m.a,N.a,n.o],pipes:[i.b,F.a],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function rc(e,t){1&e&&u.Zb(0)}function dc(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function lc(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" State must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function uc(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" State must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function bc(e,t){if(1&e&&(u.dc(0,"div",14),u.Oc(1,dc,2,0,"div",15),u.Oc(2,lc,2,1,"div",15),u.Oc(3,uc,2,1,"div",15),u.cc()),2&e){u.rc();const e=u.Gc(4);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function gc(e,t){if(1&e){const e=u.ec();u.dc(0,"div",9),u.dc(1,"label",10),u.Qc(2,"State"),u.cc(),u.dc(3,"input",11,12),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().stateName=t}),u.cc(),u.Oc(5,bc,4,3,"div",13),u.cc()}if(2&e){const e=u.Gc(4),t=u.rc();u.Kb(1),u.Pb("text-danger",e.touched&&e.invalid),u.Kb(2),u.Pb("error-control",e.touched&&e.invalid),u.yc("ngModel",t.stateName),u.Kb(2),u.yc("ngIf",e.touched&&e.invalid)}}function hc(e,t){1&e&&(u.dc(0,"app-loader"),u.Qc(1,"Please wait..."),u.cc())}let mc=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.stateName=""}ngOnInit(){this.stateName=this.data.name}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt("Save changes made?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(d.a.states,this.data._id,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} state has been updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(b.a),u.Xb(g.a),u.Xb(l.g),u.Xb(h.a),u.Xb(l.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-edit-state"]],decls:15,vars:9,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","3","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=u.ec();u.dc(0,"form",0,1),u.nc("ngSubmit",function(){u.Ic(e);const c=u.Gc(1);return t.submit(c.value)}),u.dc(2,"p",2),u.Qc(3,"Edit State"),u.cc(),u.dc(4,"mat-dialog-content"),u.Oc(5,rc,1,0,"ng-container",3),u.cc(),u.dc(6,"mat-dialog-actions",4),u.dc(7,"button",5),u.Qc(8," Save "),u.cc(),u.dc(9,"button",6),u.Qc(10," Cancel "),u.cc(),u.cc(),u.Oc(11,gc,6,6,"ng-template",null,7,u.Pc),u.Oc(13,hc,2,0,"ng-template",null,8,u.Pc),u.cc()}if(2&e){const e=u.Gc(1),c=u.Gc(12),n=u.Gc(14);u.Kb(5),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible||e.valid),u.yc("disabled",t.loader.loaderVisible||e.invalid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.p,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function fc(e,t){1&e&&u.Zb(0)}function pc(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function vc(e,t){1&e&&u.Zb(0)}function yc(e,t){if(1&e&&u.Oc(0,vc,1,0,"ng-container",13),2&e){const e=u.rc(),t=u.Gc(26),c=u.Gc(24);u.yc("ngIf",e.states.length>0)("ngIfThen",t)("ngIfElse",c)}}function Ic(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function Sc(e,t){if(1&e){const e=u.ec();u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.dc(7,"button",23),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).editState(c)}),u.Qc(8," Edit State "),u.cc(),u.cc(),u.cc(),u.cc()}if(2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc(10*(n.p-1)+(e+1)),u.Kb(2),u.Rc(c.name)}}const xc=function(e){return{itemsPerPage:10,currentPage:e}};function Oc(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",20),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",21),u.Qc(5,"Name"),u.cc(),u.dc(6,"th"),u.Qc(7,"Actions"),u.cc(),u.cc(),u.cc(),u.Oc(8,Sc,9,2,"tbody",22),u.sc(9,"paginate"),u.sc(10,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.states),u.Kb(2),u.yc("appSort",e.states),u.Kb(4),u.yc("ngForOf",u.uc(9,3,u.uc(10,6,e.states,e.searchText),u.Cc(9,xc,e.p)))}}let Kc=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.states=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getStates()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}getStates(){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.states}`,this.token).subscribe(e=>{this.states=e.filter(e=>"default"!==e.name),this.loader.hideLoader()})}editState(e){window.scroll(0,0),this.dialog.open(mc,{data:e,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getStates()})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(M.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.b))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-states"]],decls:27,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"]],template:function(e,t){if(1&e&&(u.dc(0,"nav",0),u.dc(1,"ol",1),u.dc(2,"li",2),u.dc(3,"a",3),u.Qc(4,"States"),u.cc(),u.cc(),u.dc(5,"li",4),u.Qc(6,"All States"),u.cc(),u.cc(),u.cc(),u.dc(7,"div",5),u.dc(8,"div",6),u.dc(9,"div",7),u.dc(10,"div",8),u.dc(11,"h6",9),u.Qc(12,"STATES MASTER LIST"),u.cc(),u.dc(13,"input",10),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(14,"div",11),u.dc(15,"table",12),u.Oc(16,fc,1,0,"ng-container",13),u.cc(),u.dc(17,"div",14),u.dc(18,"pagination-controls",15),u.nc("pageChange",function(e){return t.p=e}),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(19,pc,5,0,"ng-template",null,16,u.Pc),u.Oc(21,yc,1,3,"ng-template",null,17,u.Pc),u.Oc(23,Ic,4,0,"ng-template",null,18,u.Pc),u.Oc(25,Oc,11,11,"ng-template",null,19,u.Pc)),2&e){const e=u.Gc(20),c=u.Gc(22);u.Kb(13),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[o.c,o.p,o.s,n.p,i.c,m.a,N.a,n.o],pipes:[i.b,F.a],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function Qc(e,t){1&e&&u.Zb(0)}function wc(e,t){1&e&&(u.dc(0,"div"),u.Qc(1," This field is required. "),u.cc())}function kc(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" State must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function Cc(e,t){if(1&e&&(u.dc(0,"div"),u.Qc(1),u.cc()),2&e){u.rc(2);const e=u.Gc(4);u.Kb(1),u.Sc(" State must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function Pc(e,t){if(1&e&&(u.dc(0,"div",14),u.Oc(1,wc,2,0,"div",15),u.Oc(2,kc,2,1,"div",15),u.Oc(3,Cc,2,1,"div",15),u.cc()),2&e){u.rc();const e=u.Gc(4);u.Kb(1),u.yc("ngIf",e.errors.required),u.Kb(1),u.yc("ngIf",e.errors.minlength),u.Kb(1),u.yc("ngIf",e.errors.maxlength)}}function Lc(e,t){if(1&e){const e=u.ec();u.dc(0,"div",9),u.dc(1,"label",10),u.Qc(2,"Local Government"),u.cc(),u.dc(3,"input",11,12),u.nc("ngModelChange",function(t){return u.Ic(e),u.rc().lgaName=t}),u.cc(),u.Oc(5,Pc,4,3,"div",13),u.cc()}if(2&e){const e=u.Gc(4),t=u.rc();u.Kb(1),u.Pb("text-danger",e.touched&&e.invalid),u.Kb(2),u.Pb("error-control",e.touched&&e.invalid),u.yc("ngModel",t.lgaName),u.Kb(2),u.yc("ngIf",e.touched&&e.invalid)}}function Ac(e,t){1&e&&(u.dc(0,"app-loader"),u.Qc(1,"Please wait..."),u.cc())}let Tc=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.lgaName=""}ngOnInit(){this.lgaName=this.data.name}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt("Save changes made?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(d.a.lgas,this.data._id,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} LGA has been updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(b.a),u.Xb(g.a),u.Xb(l.g),u.Xb(h.a),u.Xb(l.a))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-edit-local-gov"]],decls:15,vars:9,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","3","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=u.ec();u.dc(0,"form",0,1),u.nc("ngSubmit",function(){u.Ic(e);const c=u.Gc(1);return t.submit(c.value)}),u.dc(2,"p",2),u.Qc(3,"Edit Local Government"),u.cc(),u.dc(4,"mat-dialog-content"),u.Oc(5,Qc,1,0,"ng-container",3),u.cc(),u.dc(6,"mat-dialog-actions",4),u.dc(7,"button",5),u.Qc(8," Save "),u.cc(),u.dc(9,"button",6),u.Qc(10," Cancel "),u.cc(),u.cc(),u.Oc(11,Lc,6,6,"ng-template",null,7,u.Pc),u.Oc(13,Ac,2,0,"ng-template",null,8,u.Pc),u.cc()}if(2&e){const e=u.Gc(1),c=u.Gc(12),n=u.Gc(14);u.Kb(5),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible||e.valid),u.yc("disabled",t.loader.loaderVisible||e.invalid),u.Kb(2),u.Pb("magnifyText",!t.loader.loaderVisible),u.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.p,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function zc(e,t){if(1&e&&(u.dc(0,"option",22),u.Qc(1),u.sc(2,"uppercase"),u.cc()),2&e){const e=t.$implicit;u.yc("value",e._id),u.Kb(1),u.Rc(u.tc(2,2,e.name))}}function Rc(e,t){1&e&&u.Zb(0)}function Gc(e,t){if(1&e){const e=u.ec();u.dc(0,"div",23),u.dc(1,"pagination-controls",24),u.nc("pageChange",function(t){return u.Ic(e),u.rc().p=t}),u.cc(),u.cc()}}function Mc(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.dc(3,"app-loader"),u.Qc(4,"Fetching data..."),u.cc(),u.cc(),u.cc(),u.cc())}function Nc(e,t){1&e&&u.Zb(0)}function Fc(e,t){if(1&e&&u.Oc(0,Nc,1,0,"ng-container",16),2&e){const e=u.rc(),t=u.Gc(28),c=u.Gc(26);u.yc("ngIf",e.localGovs.length>0)("ngIfThen",t)("ngIfElse",c)}}function Ec(e,t){1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3,"No record(s) to display"),u.cc(),u.cc(),u.cc())}function $c(e,t){if(1&e){const e=u.ec();u.dc(0,"tbody"),u.dc(1,"tr"),u.dc(2,"td"),u.Qc(3),u.cc(),u.dc(4,"td"),u.Qc(5),u.cc(),u.dc(6,"td"),u.dc(7,"button",28),u.nc("click",function(){u.Ic(e);const c=t.$implicit;return u.rc(2).editLga(c)}),u.Qc(8," Edit LGA "),u.cc(),u.cc(),u.cc(),u.cc()}if(2&e){const e=t.index,c=t.$implicit,n=u.rc(2);u.Kb(3),u.Rc(10*(n.p-1)+(e+1)),u.Kb(2),u.Rc(c.name)}}const jc=function(e){return{itemsPerPage:10,currentPage:e}};function Xc(e,t){if(1&e&&(u.dc(0,"thead"),u.dc(1,"tr"),u.dc(2,"th",25),u.Qc(3,"S/N"),u.cc(),u.dc(4,"th",26),u.Qc(5,"Name"),u.cc(),u.dc(6,"th"),u.Qc(7,"Actions"),u.cc(),u.cc(),u.cc(),u.Oc(8,$c,9,2,"tbody",27),u.sc(9,"paginate"),u.sc(10,"filter")),2&e){const e=u.rc();u.Kb(2),u.yc("appSort",e.localGovs),u.Kb(2),u.yc("appSort",e.localGovs),u.Kb(4),u.yc("ngForOf",u.uc(9,3,u.uc(10,6,e.localGovs,e.searchText),u.Cc(9,jc,e.p)))}}let Vc=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.stateId="",this.states=[],this.localGovs=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getStates()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}getStates(){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.states}`,this.token).subscribe(e=>{this.states=e.filter(e=>"default"!==e.name),this.stateId=this.states[0]._id,this.getLgas(),this.loader.hideLoader()})}getLgas(){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.lgas}/by-state`,this.token,this.stateId).subscribe(e=>{this.localGovs=[...e],this.loader.hideLoader()})}editLga(e){window.scroll(0,0),this.dialog.open(Tc,{data:e,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getLgas()})}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(M.a),u.Xb(g.a),u.Xb(h.a),u.Xb(l.b))},e.\u0275cmp=u.Rb({type:e,selectors:[["app-local-govs"]],decls:29,vars:7,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],["id","state","name","state","required","",1,"form-control","col-sm-12","col-md-3","float-left","mb-4",2,"border-radius","2px",3,"ngModel","ngModelChange","change"],["state","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-4",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],["class","col-12 mx-auto mt-3",4,"ngIf"],["load",""],["show",""],["noData",""],["tableData",""],[3,"value"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"]],template:function(e,t){if(1&e&&(u.dc(0,"nav",0),u.dc(1,"ol",1),u.dc(2,"li",2),u.dc(3,"a",3),u.Qc(4,"Local Governments"),u.cc(),u.cc(),u.dc(5,"li",4),u.Qc(6,"All LGAs"),u.cc(),u.cc(),u.cc(),u.dc(7,"div",5),u.dc(8,"div",6),u.dc(9,"div",7),u.dc(10,"div",8),u.dc(11,"h6",9),u.Qc(12,"LGAs MASTER LIST"),u.cc(),u.dc(13,"select",10,11),u.nc("ngModelChange",function(e){return t.stateId=e})("change",function(){return t.getLgas()}),u.Oc(15,zc,3,4,"option",12),u.cc(),u.dc(16,"input",13),u.nc("ngModelChange",function(e){return t.searchText=e}),u.cc(),u.dc(17,"div",14),u.dc(18,"table",15),u.Oc(19,Rc,1,0,"ng-container",16),u.cc(),u.Oc(20,Gc,2,0,"div",17),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.Oc(21,Mc,5,0,"ng-template",null,18,u.Pc),u.Oc(23,Fc,1,3,"ng-template",null,19,u.Pc),u.Oc(25,Ec,4,0,"ng-template",null,20,u.Pc),u.Oc(27,Xc,11,11,"ng-template",null,21,u.Pc)),2&e){const e=u.Gc(22),c=u.Gc(24);u.Kb(13),u.yc("ngModel",t.stateId),u.Kb(2),u.yc("ngForOf",t.states),u.Kb(1),u.yc("ngModel",t.searchText),u.Kb(3),u.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c),u.Kb(1),u.yc("ngIf",t.localGovs.length>0)}},directives:[o.y,o.x,o.p,o.s,n.o,o.c,n.p,o.t,o.A,i.c,m.a,N.a],pipes:[n.A,i.b,F.a],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();var qc=c("T2Cl");const Yc=[{path:"users",canActivate:[qc.a],component:B},{path:"enrollment-zones",canActivate:[qc.a],component:fe},{path:"hajj-year",canActivate:[qc.a],component:Xt},{path:"banks",canActivate:[qc.a],component:sc},{path:"states",canActivate:[qc.a],component:Kc},{path:"lga",canActivate:[qc.a],component:Vc},{path:"",redirectTo:"users",pathMatch:"full"}];let Dc=(()=>{class e{}return e.\u0275mod=u.Vb({type:e}),e.\u0275inj=u.Ub({factory:function(t){return new(t||e)},imports:[[n.c,s.f.forChild(Yc)]]}),e})();var Zc=c("hctd"),_c=c("q4JE");let Bc=(()=>{class e{}return e.\u0275mod=u.Vb({type:e}),e.\u0275inj=u.Ub({factory:function(t){return new(t||e)},imports:[[n.c,Dc,i.a,a.e,o.j,o.w,Zc.a,_c.a]]}),e})()}}]);