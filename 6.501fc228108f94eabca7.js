(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{sJ2M:function(e,t,c){"use strict";c.r(t),c.d(t,"AdminModule",function(){return $c});var n=c("ofXK"),i=c("oOf3"),a=c("1kSV"),o=c("3Pt+"),s=c("tyNb"),r=c("quSY"),d=c("AytR"),l=c("0IaG"),b=c("fXoL"),u=c("IRLN"),g=c("EnSQ"),h=c("OC8m"),m=c("F4W7");const f=["localGovernmentId"];function p(e,t){1&e&&b.Zb(0)}function v(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function y(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Full name must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function I(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Full name must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function S(e,t){if(1&e&&(b.dc(0,"div",25),b.Oc(1,v,2,0,"div",26),b.Oc(2,y,2,1,"div",26),b.Oc(3,I,2,1,"div",26),b.cc()),2&e){b.rc();const e=b.Gc(4);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function x(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function O(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Please enter a valid email. "),b.cc())}function K(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(10);b.Kb(1),b.Sc(" Email must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function w(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(10);b.Kb(1),b.Sc(" Email must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function Q(e,t){if(1&e&&(b.dc(0,"div",25),b.Oc(1,x,2,0,"div",26),b.Oc(2,O,2,0,"div",26),b.Oc(3,K,2,1,"div",26),b.Oc(4,w,2,1,"div",26),b.cc()),2&e){b.rc();const e=b.Gc(10);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.pattern),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function k(e,t){if(1&e&&(b.dc(0,"option",27),b.Qc(1),b.sc(2,"uppercase"),b.cc()),2&e){const e=t.$implicit;b.yc("value",e._id),b.Kb(1),b.Rc(b.tc(2,2,e.name))}}function C(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Select a Role. "),b.cc())}function P(e,t){if(1&e&&(b.dc(0,"div",25),b.Oc(1,C,2,0,"div",26),b.cc()),2&e){b.rc();const e=b.Gc(16);b.Kb(1),b.yc("ngIf",e.errors.required)}}function A(e,t){if(1&e&&(b.dc(0,"option",27),b.Qc(1),b.sc(2,"uppercase"),b.cc()),2&e){const e=t.$implicit;b.yc("value",e._id),b.Kb(1),b.Rc(b.tc(2,2,e.name+" ("+e.code+")"))}}function L(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Select a local government. "),b.cc())}function T(e,t){if(1&e&&(b.dc(0,"div",25),b.Oc(1,L,2,0,"div",26),b.cc()),2&e){b.rc();const e=b.Gc(25);b.Kb(1),b.yc("ngIf",e.errors.required)}}function z(e,t){if(1&e){const e=b.ec();b.dc(0,"div",9),b.dc(1,"label",10),b.Qc(2,"Full Name"),b.cc(),b.dc(3,"input",11,12),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().formName=t}),b.cc(),b.Oc(5,S,4,3,"div",13),b.cc(),b.dc(6,"div",9),b.dc(7,"label",14),b.Qc(8,"Email"),b.cc(),b.dc(9,"input",15,16),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().formEmail=t}),b.cc(),b.Oc(11,Q,5,4,"div",13),b.cc(),b.dc(12,"div",9),b.dc(13,"label",17),b.Qc(14,"Role"),b.cc(),b.dc(15,"select",18,19),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().formRoleId=t})("change",function(){return b.Ic(e),b.rc().filterZones()}),b.dc(17,"option",20),b.Qc(18,"Select a Role"),b.cc(),b.Oc(19,k,3,4,"option",21),b.cc(),b.Oc(20,P,2,1,"div",13),b.cc(),b.dc(21,"div",9),b.dc(22,"label",22),b.Qc(23,"Local Government"),b.cc(),b.dc(24,"select",23,24),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().formLga=t}),b.dc(26,"option",20),b.Qc(27,"Select a Local Government"),b.cc(),b.Oc(28,A,3,4,"option",21),b.cc(),b.Oc(29,T,2,1,"div",13),b.cc()}if(2&e){const e=b.Gc(4),t=b.Gc(10),c=b.Gc(16),n=b.Gc(25),i=b.rc();b.Kb(1),b.Pb("text-danger",e.touched&&e.invalid),b.Kb(2),b.Pb("error-control",e.touched&&e.invalid),b.yc("ngModel",i.formName),b.Kb(2),b.yc("ngIf",e.touched&&e.invalid),b.Kb(2),b.Pb("text-danger",t.touched&&t.invalid),b.Kb(2),b.Pb("error-control",t.touched&&t.invalid),b.yc("ngModel",i.formEmail)("pattern",i.emailPattern),b.Kb(2),b.yc("ngIf",t.touched&&t.invalid),b.Kb(2),b.Pb("text-danger",c.touched&&c.invalid),b.Kb(2),b.Pb("error-control",c.touched&&c.invalid),b.yc("ngModel",i.formRoleId)("disabled",i.data),b.Kb(4),b.yc("ngForOf",i.rolesList),b.Kb(1),b.yc("ngIf",c.touched&&c.invalid),b.Kb(2),b.Pb("text-danger",n.touched&&n.invalid),b.Kb(2),b.Pb("error-control",n.touched&&n.invalid),b.yc("ngModel",i.formLga)("disabled",i.data),b.Kb(4),b.yc("ngForOf",i.zones),b.Kb(1),b.yc("ngIf",n.touched&&n.invalid)}}function G(e,t){1&e&&(b.dc(0,"app-loader"),b.Qc(1,"Please wait..."),b.cc())}let R=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.action="Add New User",this.token=sessionStorage.getItem("token"),this.rolesList=JSON.parse(sessionStorage.getItem("roleList")).filter(e=>"super-admin"!=e.name),this.zones=[],this.initiaitorZones=[],this.reviewerZone=[],this.emailPattern=d.a.emailPattern,this.zonesSubscription=new r.a,this.regSubscription=new r.a,this.formName="",this.formEmail="",this.formRoleId="",this.formLga=""}ngOnInit(){this.getLocalGovernments(),this.data&&(this.action="Edit User",this.formName=this.data.name,this.formEmail=this.data.email,this.formRoleId=this.data.role,this.formLga=this.data.localGovernment._id)}ngOnDestroy(){this.loader.hideLoader(),this.zonesSubscription.unsubscribe(),this.regSubscription.unsubscribe()}filterZones(){if(!this.data){this.localGovernmentId.reset("");const e=this.rolesList.find(e=>"reviewer"==e.name);this.zones=e._id===this.formRoleId?[...this.reviewerZone]:[...this.initiaitorZones]}}getLocalGovernments(){this.loader.showLoader(),this.zonesSubscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{if(this.loader.hideLoader(),!this.data)return this.initiaitorZones=e.filter(e=>"00"!=e.code&&"01"!=e.code),void(this.reviewerZone=e.filter(e=>"01"==e.code));this.zones=[...e]})}submit(e){this.notifications.prompt(this.data?"Save changes ?":"Create user?").then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=d.a.users;this.data?this.updateExisting(this.data._id,t):this.saveNewUser(e.value,t)}})}saveNewUser(e,t){this.regSubscription=this.dataService.post(t,e,this.token).subscribe(e=>{this.notifications.successToast("User created successfully."),this.loader.hideLoader(),this.dialogRef.close(!0)})}updateExisting(e,t){this.regSubscription=this.dataService.update(t,e,{name:this.formName,email:this.formEmail,roleId:this.formRoleId,localGovernmentId:this.formLga},this.token).subscribe(e=>{this.notifications.successToast("User successfully updated."),this.loader.hideLoader(),this.dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(u.a),b.Xb(g.a),b.Xb(l.g),b.Xb(h.a),b.Xb(l.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-add-user"]],viewQuery:function(e,t){if(1&e&&b.Uc(f,1),2&e){let e;b.Fc(e=b.oc())&&(t.localGovernmentId=e.first)}},decls:15,vars:10,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","5","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","email"],["type","email","id","email","name","email","minlength","5","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["for","roleId"],["id","roleId","name","roleId","required","",1,"form-control","form-control-sm",2,"border-radius","2px",3,"ngModel","disabled","ngModelChange","change"],["roleId","ngModel"],["selected","","hidden","","value",""],[3,"value",4,"ngFor","ngForOf"],["for","localGovernmentId"],["id","localGovernmentId","name","localGovernmentId","required","",1,"form-control","form-control-sm",2,"border-radius","2px",3,"ngModel","disabled","ngModelChange"],["localGovernmentId","ngModel"],[1,"text-danger","mt-1"],[4,"ngIf"],[3,"value"]],template:function(e,t){if(1&e){const e=b.ec();b.dc(0,"form",0,1),b.nc("ngSubmit",function(){b.Ic(e);const c=b.Gc(1);return t.submit(c)}),b.dc(2,"p",2),b.Qc(3),b.cc(),b.dc(4,"mat-dialog-content"),b.Oc(5,p,1,0,"ng-container",3),b.cc(),b.dc(6,"mat-dialog-actions",4),b.dc(7,"button",5),b.Qc(8," Save "),b.cc(),b.dc(9,"button",6),b.Qc(10," Cancel "),b.cc(),b.cc(),b.Oc(11,z,30,29,"ng-template",null,7,b.Pc),b.Oc(13,G,2,0,"ng-template",null,8,b.Pc),b.cc()}if(2&e){const e=b.Gc(1),c=b.Gc(12),n=b.Gc(14);b.Kb(3),b.Rc(t.action),b.Kb(2),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible||e.valid),b.yc("disabled",t.loader.loaderVisible||e.invalid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.o,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,o.v,o.y,o.t,o.A,n.n,m.a],pipes:[n.z],styles:[""]}),e})();var M=c("5dVO"),F=c("mURs"),N=c("fC9P");function E(e,t){1&e&&b.Zb(0)}function $(e,t){if(1&e&&(b.dc(0,"option",28),b.Qc(1),b.cc()),2&e){const e=t.$implicit;b.yc("value",e),b.Kb(1),b.Sc("Show ",e," Items")}}function j(e,t){if(1&e){const e=b.ec();b.dc(0,"div",25),b.dc(1,"select",26),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().pageSize=t})("change",function(){return b.Ic(e),b.rc().onPageSizeChange()}),b.Oc(2,$,2,2,"option",27),b.cc(),b.cc()}if(2&e){const e=b.rc();b.Kb(1),b.yc("ngModel",e.pageSize),b.Kb(1),b.yc("ngForOf",e.pages)}}function q(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.dc(3,"app-loader"),b.Qc(4,"Fetching data..."),b.cc(),b.cc(),b.cc(),b.cc())}function V(e,t){1&e&&b.Zb(0)}function X(e,t){if(1&e&&b.Oc(0,V,1,0,"ng-container",17),2&e){const e=b.rc(),t=b.Gc(38),c=b.Gc(36);b.yc("ngIf",e.users.length>0)("ngIfThen",t)("ngIfElse",c)}}function Y(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3,"No record(s) to display"),b.cc(),b.cc(),b.cc())}function D(e,t){if(1&e){const e=b.ec();b.dc(0,"tbody"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3),b.cc(),b.dc(4,"td"),b.Qc(5),b.cc(),b.dc(6,"td"),b.Qc(7),b.cc(),b.dc(8,"td"),b.Qc(9),b.cc(),b.dc(10,"td"),b.Qc(11),b.sc(12,"date"),b.cc(),b.dc(13,"td"),b.dc(14,"button",35),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).addUser(c)}),b.Qc(15,"Edit"),b.cc(),b.Qc(16," \xa0 \xa0 "),b.dc(17,"div",36,37),b.dc(19,"button",38),b.nc("focus",function(){return b.Ic(e),b.Gc(18).open()}),b.Qc(20,"More"),b.cc(),b.dc(21,"div",39),b.dc(22,"button",40),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).resetPassword(c)}),b.Qc(23,"Reset Password"),b.cc(),b.dc(24,"button",41),b.Qc(25,"Change Role"),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc()}if(2&e){const e=t.index,c=t.$implicit,n=b.rc(2);b.Kb(3),b.Rc((n.p-1)*n.pageSize+(e+1)),b.Kb(2),b.Rc(c.name),b.Kb(2),b.Rc(c.email),b.Kb(2),b.Rc(c.localGovernment.name),b.Kb(2),b.Rc(b.uc(12,5,c.dateCreated,"medium"))}}const Z=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function _(e,t){if(1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"th",29),b.Qc(3,"S/N"),b.cc(),b.dc(4,"th",30),b.Qc(5,"Full Name"),b.cc(),b.dc(6,"th",31),b.Qc(7,"Email"),b.cc(),b.dc(8,"th",32),b.Qc(9,"Zone"),b.cc(),b.dc(10,"th",33),b.Qc(11,"Date Created"),b.cc(),b.dc(12,"th"),b.Qc(13,"Actions"),b.cc(),b.cc(),b.cc(),b.Oc(14,D,26,8,"tbody",34),b.sc(15,"paginate"),b.sc(16,"filter")),2&e){const e=b.rc();b.Kb(2),b.yc("appSort",e.users),b.Kb(2),b.yc("appSort",e.users),b.Kb(2),b.yc("appSort",e.users),b.Kb(2),b.yc("appSort",e.users),b.Kb(2),b.yc("appSort",e.users),b.Kb(4),b.yc("ngForOf",b.uc(15,6,b.uc(16,9,e.users,e.searchText),b.Ec(12,Z,e.pageSize,e.p,e.totalItems)))}}let B=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.dialog=c,this.notifications=n,this.searchText="",this.users=[],this.p=1,this.pageSize=5,this.pages=[1,5,10,15,20],this.totalItems=0,this.active="initiators",this.display="Initiators List",this.rolesList=[...JSON.parse(sessionStorage.getItem("roleList"))],this.subscription=new r.a}ngOnInit(){this.tabClick("initiators")}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}tabClick(e){let t;switch(this.p=1,this.pageSize=5,this.active=e,e){case"initiators":t=this.getRole("initiator"),this.display="Initiators List";break;case"admins":t=this.getRole("admin"),this.display="Admin List";break;default:t=this.getRole("reviewer"),this.display="Reviewer List"}this.getUsers(t._id)}onPageSizeChange(){this.onNavigate(1)}onNavigate(e){let t;switch(e&&(this.p=e),this.active){case"initiators":t=this.getRole("initiator");break;case"admins":t=this.getRole("admin");break;default:t=this.getRole("reviewer")}this.getUsers(t._id,this.pageSize,this.p)}getRole(e){return this.rolesList.find(t=>t.name===e)}getUsers(e,t,c){this.loader.showLoader();const n=`${d.a.users}/by-role`,i=sessionStorage.getItem("token");this.subscription=this.dataService.get(n,i,e,{pageSize:t,page:c}).subscribe(e=>{this.users=[...e.users],this.totalItems=e.totalDocs,this.loader.hideLoader()})}addUser(e){window.scroll(0,0),this.dialog.open(R,{width:"32rem",disableClose:!0,data:e||null}).afterClosed().subscribe(e=>{e&&this.tabClick(this.active)})}resetPassword(e){this.notifications.prompt(`Are you sure you want to reset ${e.name.toUpperCase()}'s password ?`).then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=`${d.a.users}/reset-password`,c=sessionStorage.getItem("token");this.subscription=this.dataService.update(t,e._id,{},c).subscribe(t=>{this.notifications.alert(`${e.name.toUpperCase()}'s password has been reset.<br/>New password: password`).then(e=>{e.isConfirmed&&this.tabClick(this.active)})})}})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(M.a),b.Xb(g.a),b.Xb(l.b),b.Xb(h.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-users"]],decls:39,vars:18,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12",2,"text-align","center"],["role","group",1,"btn-group","mb-4"],["type","button",1,"magnifyText","btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"disabled","click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["class","float-left",4,"ngIf"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],[1,"float-left"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","email",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","localGovernment.name",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","dateCreated",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-primary","btn-sm",2,"color","white!important",3,"click"],["ngbDropdown","","container","body",1,"d-inline-block"],["moreActionsDrop","ngbDropdown"],["id","moredropDown","ngbDropdownAnchor","",1,"magnifyText","btn","btn-sm","btn-outline-primary",3,"focus"],["ngbDropdownMenu","","aria-labelledby","moredropDown"],["ngbDropdownItem","",1,"my-2",2,"font-size","105%!important",3,"click"],["ngbDropdownItem","",1,"my-2",2,"font-size","105%!important"]],template:function(e,t){if(1&e&&(b.dc(0,"nav",0),b.dc(1,"ol",1),b.dc(2,"li",2),b.dc(3,"a",3),b.Qc(4,"Users"),b.cc(),b.cc(),b.dc(5,"li",4),b.Qc(6),b.cc(),b.cc(),b.cc(),b.dc(7,"div",5),b.dc(8,"div",6),b.dc(9,"button",7),b.nc("click",function(){return t.tabClick("initiators")}),b.Qc(10," Initiators "),b.cc(),b.dc(11,"button",7),b.nc("click",function(){return t.tabClick("admins")}),b.Qc(12," Admins "),b.cc(),b.dc(13,"button",7),b.nc("click",function(){return t.tabClick("reviewers")}),b.Qc(14," Reviewers "),b.cc(),b.cc(),b.cc(),b.dc(15,"div",8),b.dc(16,"div",9),b.dc(17,"div",10),b.dc(18,"div",11),b.dc(19,"h6",12),b.Qc(20,"USERS MASTER LIST"),b.cc(),b.dc(21,"button",13),b.nc("click",function(){return t.addUser()}),b.dc(22,"span"),b.Qc(23,"Add User"),b.cc(),b.cc(),b.dc(24,"input",14),b.nc("ngModelChange",function(e){return t.searchText=e}),b.cc(),b.dc(25,"div",15),b.dc(26,"table",16),b.Oc(27,E,1,0,"ng-container",17),b.cc(),b.dc(28,"div",18),b.Oc(29,j,3,2,"div",19),b.dc(30,"pagination-controls",20),b.nc("pageChange",function(e){return t.onNavigate(e)}),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.Oc(31,q,5,0,"ng-template",null,21,b.Pc),b.Oc(33,X,1,3,"ng-template",null,22,b.Pc),b.Oc(35,Y,4,0,"ng-template",null,23,b.Pc),b.Oc(37,_,17,16,"ng-template",null,24,b.Pc)),2&e){const e=b.Gc(32),c=b.Gc(34);b.Kb(6),b.Rc(t.display),b.Kb(3),b.Pb("btn-active","initiators"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(2),b.Pb("btn-active","admins"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(2),b.Pb("btn-active","reviewers"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(8),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible),b.Kb(3),b.yc("ngModel",t.searchText),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c),b.Kb(2),b.yc("ngIf",t.users.length>0)}},directives:[o.c,o.p,o.s,n.o,i.c,o.y,n.n,o.t,o.A,m.a,F.a,a.a,a.b,a.d,a.c],pipes:[i.b,N.a,n.f],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function U(e,t){1&e&&b.Zb(0)}function H(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function J(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Zone name must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function W(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Zone name must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function ee(e,t){if(1&e&&(b.dc(0,"div",17),b.Oc(1,H,2,0,"div",18),b.Oc(2,J,2,1,"div",18),b.Oc(3,W,2,1,"div",18),b.cc()),2&e){b.rc();const e=b.Gc(4);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function te(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function ce(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(10);b.Kb(1),b.Sc(" Zone code must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function ne(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(10);b.Kb(1),b.Sc(" Zone code must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function ie(e,t){if(1&e&&(b.dc(0,"div",17),b.Oc(1,te,2,0,"div",18),b.Oc(2,ce,2,1,"div",18),b.Oc(3,ne,2,1,"div",18),b.cc()),2&e){b.rc();const e=b.Gc(10);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function ae(e,t){if(1&e){const e=b.ec();b.dc(0,"div",9),b.dc(1,"label",10),b.Qc(2,"Zone Name"),b.cc(),b.dc(3,"input",11,12),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().zoneName=t}),b.cc(),b.Oc(5,ee,4,3,"div",13),b.cc(),b.dc(6,"div",9),b.dc(7,"label",14),b.Qc(8,"Zone Code"),b.cc(),b.dc(9,"input",15,16),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().zoneCode=t}),b.cc(),b.Oc(11,ie,4,3,"div",13),b.cc()}if(2&e){const e=b.Gc(4),t=b.Gc(10),c=b.rc();b.Kb(1),b.Pb("text-danger",e.touched&&e.invalid),b.Kb(2),b.Pb("error-control",e.touched&&e.invalid),b.yc("ngModel",c.zoneName),b.Kb(2),b.yc("ngIf",e.touched&&e.invalid),b.Kb(2),b.Pb("text-danger",t.touched&&t.invalid),b.Kb(2),b.Pb("error-control",t.touched&&t.invalid),b.yc("ngModel",c.zoneCode),b.Kb(2),b.yc("ngIf",t.touched&&t.invalid)}}function oe(e,t){1&e&&(b.dc(0,"app-loader"),b.Qc(1,"Please wait..."),b.cc())}let se=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.zoneName="",this.zoneCode=""}ngOnInit(){this.zoneName=this.data.name,this.zoneCode=this.data.code}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt("Save changes made?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(d.a.zones,this.data._id,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} (${e.code}) updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(u.a),b.Xb(g.a),b.Xb(l.g),b.Xb(h.a),b.Xb(l.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-edit-enrollment-zone"]],decls:15,vars:9,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","3","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","code"],["type","text","id","code","name","code","minlength","2","maxlength","3","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["code","ngModel"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=b.ec();b.dc(0,"form",0,1),b.nc("ngSubmit",function(){b.Ic(e);const c=b.Gc(1);return t.submit(c.value)}),b.dc(2,"p",2),b.Qc(3,"Edit Enrollment Zone"),b.cc(),b.dc(4,"mat-dialog-content"),b.Oc(5,U,1,0,"ng-container",3),b.cc(),b.dc(6,"mat-dialog-actions",4),b.dc(7,"button",5),b.Qc(8," Save "),b.cc(),b.dc(9,"button",6),b.Qc(10," Cancel "),b.cc(),b.cc(),b.Oc(11,ae,12,12,"ng-template",null,7,b.Pc),b.Oc(13,oe,2,0,"ng-template",null,8,b.Pc),b.cc()}if(2&e){const e=b.Gc(1),c=b.Gc(12),n=b.Gc(14);b.Kb(5),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible||e.valid),b.yc("disabled",t.loader.loaderVisible||e.invalid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.o,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function re(e,t){1&e&&b.Zb(0)}function de(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.dc(3,"app-loader"),b.Qc(4,"Fetching data..."),b.cc(),b.cc(),b.cc(),b.cc())}function le(e,t){1&e&&b.Zb(0)}function be(e,t){if(1&e&&b.Oc(0,le,1,0,"ng-container",13),2&e){const e=b.rc(),t=b.Gc(26),c=b.Gc(24);b.yc("ngIf",e.zones.length>0)("ngIfThen",t)("ngIfElse",c)}}function ue(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3,"No record(s) to display"),b.cc(),b.cc(),b.cc())}function ge(e,t){if(1&e){const e=b.ec();b.dc(0,"tbody"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3),b.cc(),b.dc(4,"td"),b.Qc(5),b.cc(),b.dc(6,"td"),b.Qc(7),b.sc(8,"uppercase"),b.cc(),b.dc(9,"td"),b.Qc(10," \xa0 "),b.dc(11,"button",24),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).editZone(c)}),b.Qc(12," Edit Center "),b.cc(),b.cc(),b.cc(),b.cc()}if(2&e){const e=t.index,c=t.$implicit,n=b.rc(2);b.Kb(3),b.Rc(10*(n.p-1)+(e+1)),b.Kb(2),b.Rc(c.name),b.Kb(2),b.Rc(b.tc(8,3,c.code))}}const he=function(e){return{itemsPerPage:10,currentPage:e}};function me(e,t){if(1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"th",20),b.Qc(3,"S/N"),b.cc(),b.dc(4,"th",21),b.Qc(5,"Name"),b.cc(),b.dc(6,"th",22),b.Qc(7,"Center Code"),b.cc(),b.dc(8,"th"),b.Qc(9,"Actions"),b.cc(),b.cc(),b.cc(),b.Oc(10,ge,13,5,"tbody",23),b.sc(11,"paginate"),b.sc(12,"filter")),2&e){const e=b.rc();b.Kb(2),b.yc("appSort",e.zones),b.Kb(2),b.yc("appSort",e.zones),b.Kb(2),b.yc("appSort",e.zones),b.Kb(4),b.yc("ngForOf",b.uc(11,4,b.uc(12,7,e.zones,e.searchText),b.Cc(10,he,e.p)))}}let fe=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.zones=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getZones()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}getZones(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{const t=["00","01"];this.zones=e.filter(e=>!t.includes(e.code)),this.loader.hideLoader()})}editZone(e){window.scroll(0,0),this.dialog.open(se,{data:e,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getZones()})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(M.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.b))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-enrollment-zones"]],decls:27,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","code",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"]],template:function(e,t){if(1&e&&(b.dc(0,"nav",0),b.dc(1,"ol",1),b.dc(2,"li",2),b.dc(3,"a",3),b.Qc(4,"Registration Centers"),b.cc(),b.cc(),b.dc(5,"li",4),b.Qc(6,"All Centers"),b.cc(),b.cc(),b.cc(),b.dc(7,"div",5),b.dc(8,"div",6),b.dc(9,"div",7),b.dc(10,"div",8),b.dc(11,"h6",9),b.Qc(12,"REGISTRATION CENTERS MASTER LIST"),b.cc(),b.dc(13,"input",10),b.nc("ngModelChange",function(e){return t.searchText=e}),b.cc(),b.dc(14,"div",11),b.dc(15,"table",12),b.Oc(16,re,1,0,"ng-container",13),b.cc(),b.dc(17,"div",14),b.dc(18,"pagination-controls",15),b.nc("pageChange",function(e){return t.p=e}),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.Oc(19,de,5,0,"ng-template",null,16,b.Pc),b.Oc(21,be,1,3,"ng-template",null,17,b.Pc),b.Oc(23,ue,4,0,"ng-template",null,18,b.Pc),b.Oc(25,me,13,12,"ng-template",null,19,b.Pc)),2&e){const e=b.Gc(20),c=b.Gc(22);b.Kb(13),b.yc("ngModel",t.searchText),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[o.c,o.p,o.s,n.o,i.c,m.a,F.a,n.n],pipes:[i.b,N.a,n.z],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();var pe=c("wd/R");class ve{static cannotContainSpace(e){return e.value.indexOf(" ")>=0?{cannotContainSpace:!0}:null}static cannotContainDecimal(e){return(e.value+"").indexOf(".")>=0?{cannotContainDecimal:!0}:null}static shouldBeUnique(e){return new Promise((t,c)=>{setTimeout(()=>{console.log("Ok"),t("db value"===e.value?{shouldBeUnique:!0}:null)},2e3)})}}var ye=c("YWmY");function Ie(e,t){1&e&&b.Zb(0)}function Se(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Hajj year is required "),b.cc())}function xe(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Enter a valid year "),b.cc())}function Oe(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Spaces are not allowed "),b.cc())}function Ke(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Year must not be less than current year "),b.cc())}function we(e,t){if(1&e&&(b.dc(0,"div",23),b.Oc(1,Se,2,0,"div",24),b.Oc(2,xe,2,0,"div",24),b.Oc(3,Oe,2,0,"div",24),b.Oc(4,Ke,2,0,"div",24),b.cc()),2&e){const e=b.rc(2);b.Kb(1),b.yc("ngIf",e.year.errors.required),b.Kb(1),b.yc("ngIf",e.year.errors.pattern),b.Kb(1),b.yc("ngIf",e.year.errors.cannotContainSpace),b.Kb(1),b.yc("ngIf",e.year.errors.lessThanCurrentYear)}}function Qe(e,t){if(1&e&&(b.dc(0,"option",25),b.Qc(1),b.cc()),2&e){const e=t.$implicit;b.yc("value",e),b.Kb(1),b.Rc(e?"Active":"Inactive")}}function ke(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Hajj year status is required "),b.cc())}function Ce(e,t){if(1&e&&(b.dc(0,"div",23),b.Oc(1,ke,2,0,"div",24),b.cc()),2&e){const e=b.rc(2);b.Kb(1),b.yc("ngIf",e.active.errors.required)}}function Pe(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Date opened is required "),b.cc())}function Ae(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Date Opened must not be less than today "),b.cc())}function Le(e,t){if(1&e&&(b.dc(0,"div",23),b.Oc(1,Pe,2,0,"div",24),b.Oc(2,Ae,2,0,"div",24),b.cc()),2&e){const e=b.rc(2);b.Kb(1),b.yc("ngIf",e.dateOpened.errors.required),b.Kb(1),b.yc("ngIf",e.dateOpened.errors.lessThanToday)}}function Te(e,t){1&e&&(b.dc(0,"div",26),b.dc(1,"h6"),b.Qc(2,"No seats allocated yet, click add seats button to add allocations."),b.cc(),b.cc())}function ze(e,t){1&e&&(b.dc(0,"div",27),b.dc(1,"h6"),b.Qc(2,"Seat Allocations"),b.cc(),b.cc())}function Ge(e,t){if(1&e&&(b.dc(0,"option",37),b.Qc(1),b.cc()),2&e){const e=t.$implicit;b.yc("value",e._id)("hidden",e.exempted),b.Kb(1),b.Rc(e.name)}}function Re(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Enrollment center is required "),b.cc())}function Me(e,t){if(1&e&&(b.dc(0,"div",23),b.Oc(1,Re,2,0,"div",24),b.cc()),2&e){const e=b.rc().$implicit;b.Kb(1),b.yc("ngIf",e.get("zone").errors.required)}}function Fe(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Seat allocated is required "),b.cc())}function Ne(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Enter a valid seat number "),b.cc())}function Ee(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){const e=b.rc(2).$implicit;b.Kb(1),b.Sc(" Seat allocation must be atleast ",e.get("seatsAllocated").errors.min.min,". ")}}function $e(e,t){if(1&e&&(b.dc(0,"div",23),b.Oc(1,Fe,2,0,"div",24),b.Oc(2,Ne,2,0,"div",24),b.Oc(3,Ee,2,1,"div",24),b.cc()),2&e){const e=b.rc().$implicit;b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").errors.required),b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").errors.pattern),b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").errors.min)}}function je(e,t){if(1&e){const e=b.ec();b.bc(0),b.dc(1,"form",28),b.dc(2,"div",29),b.dc(3,"button",30),b.nc("click",function(){b.Ic(e);const c=t.index;return b.rc(2).removeSeatAllocation(c)}),b.Qc(4," Remove "),b.cc(),b.cc(),b.dc(5,"div",8),b.dc(6,"div",9),b.dc(7,"label",31),b.Qc(8,"Center"),b.cc(),b.dc(9,"select",32),b.nc("change",function(){b.Ic(e);const c=t.$implicit,n=t.index;return b.rc(2).exemptZone(c.get("zone").value,n)}),b.dc(10,"option",33),b.Qc(11,"Select center"),b.cc(),b.Oc(12,Ge,2,3,"option",34),b.cc(),b.Oc(13,Me,2,1,"div",12),b.cc(),b.dc(14,"div",9),b.dc(15,"label",35),b.Qc(16,"Seats"),b.cc(),b.Yb(17,"input",36),b.Oc(18,$e,4,3,"div",12),b.cc(),b.cc(),b.cc(),b.ac()}if(2&e){const e=t.$implicit,c=b.rc(2);b.Kb(1),b.yc("formGroup",e),b.Kb(6),b.Pb("text-danger",e.get("zone").invalid&&e.get("zone").touched),b.Kb(2),b.Pb("border-danger",e.get("zone").invalid&&e.get("zone").touched),b.Kb(3),b.yc("ngForOf",c.zones),b.Kb(1),b.yc("ngIf",e.get("zone").touched&&e.get("zone").invalid),b.Kb(2),b.Pb("text-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),b.Kb(2),b.Pb("border-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid)}}function qe(e,t){if(1&e){const e=b.ec();b.dc(0,"div",8),b.dc(1,"div",9),b.dc(2,"label",10),b.Qc(3,"Hajj Year"),b.cc(),b.Yb(4,"input",11),b.Oc(5,we,5,4,"div",12),b.cc(),b.dc(6,"div",9),b.dc(7,"label",13),b.Qc(8,"Status"),b.cc(),b.dc(9,"select",14),b.Oc(10,Qe,2,2,"option",15),b.cc(),b.Oc(11,Ce,2,1,"div",12),b.cc(),b.cc(),b.dc(12,"div",8),b.dc(13,"div",9),b.dc(14,"label",16),b.Qc(15,"Open Date"),b.cc(),b.Yb(16,"input",17),b.Oc(17,Le,3,2,"div",12),b.cc(),b.cc(),b.Oc(18,Te,3,0,"div",18),b.Oc(19,ze,3,0,"div",19),b.Oc(20,je,19,12,"ng-container",20),b.dc(21,"div",21),b.dc(22,"button",22),b.nc("click",function(){return b.Ic(e),b.rc().addSeatAllocation()}),b.Qc(23," Add Seat Allocation "),b.cc(),b.cc()}if(2&e){const e=b.rc();b.Kb(2),b.Pb("text-danger",e.year.touched&&e.year.invalid),b.Kb(2),b.Pb("border-danger",e.year.touched&&e.year.invalid),b.Kb(1),b.yc("ngIf",e.year.touched&&e.year.invalid),b.Kb(2),b.Pb("text-danger",e.active.invalid&&e.active.touched),b.Kb(2),b.Pb("border-danger",e.active.invalid&&e.active.touched),b.Kb(1),b.yc("ngForOf",e.activeCollection),b.Kb(1),b.yc("ngIf",e.active.touched&&e.active.invalid),b.Kb(3),b.Pb("text-danger",e.dateOpened.touched&&e.dateOpened.invalid),b.Kb(2),b.Pb("border-danger",e.dateOpened.touched&&e.dateOpened.invalid),b.Kb(1),b.yc("ngIf",e.dateOpened.touched&&e.dateOpened.invalid),b.Kb(1),b.yc("ngIf",e.seatAllocationForms.length<1),b.Kb(1),b.yc("ngIf",e.seatAllocationForms.length>0),b.Kb(1),b.yc("ngForOf",e.seatAllocationForms)}}function Ve(e,t){1&e&&b.Yb(0,"app-loader")}let Xe=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.notifications=c,this.dialogRef=n,this.fb=i,this.activeCollection=[!0,!1],this.zones=[],this.token=sessionStorage.getItem("token"),this.subscription=new r.a}ngOnInit(){this.initializeForm(),this.getZones()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}initializeForm(){this.hajjYearForm=this.fb.group({year:["",[o.z.required,o.z.pattern(/^20[2-9]{1}[0-9]{1}$/),ve.cannotContainSpace,ye.a.lessThanCurrentYear]],active:[!1],dateOpened:["",[o.z.required,ye.a.lessThanToday]],seatAllocations:new o.d([])})}submit(){const e={year:this.year.value,active:this.active.value,dateOpened:this.dateOpened.value,seatAllocations:[...this.seatAllocations.value]};this.notifications.prompt(`Open ${this.year.value} hajj?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.post(`${d.a.years}`,e,this.token).subscribe(e=>{console.log(e),this.notifications.successToast(`${e.year} hajj has been successfully opened.`),this.dialogRef.close(!0)}))})}getZones(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{const t=["00","01"];this.zones=e.filter(e=>!t.includes(e.code)).map(e=>(e.exempted=!1,e)),this.loader.hideLoader()})}get year(){return this.hajjYearForm.get("year")}get active(){return this.hajjYearForm.get("active")}get dateOpened(){return this.hajjYearForm.get("dateOpened")}get seatAllocations(){return this.hajjYearForm.get("seatAllocations")}get seatAllocationForms(){return this.hajjYearForm.get("seatAllocations").controls}addSeatAllocation(){if(23===this.seatAllocationForms.length)return this.notifications.alert("You' allocated seats to all centers.");this.seatAllocations.push(this.fb.group({zone:["",o.z.required],seatsAllocated:["",[o.z.required,o.z.pattern(/^[0-9]+$/),o.z.min(0)]]}))}removeSeatAllocation(e){const t=this.seatAllocations.controls.splice(e,1);this.zones.forEach(e=>{e._id===t[0].get("zone").value&&(e.exempted=!1,e.controlIndex=void 0)})}exemptZone(e,t){const c=this.zones.find(t=>t._id===e);if(c.exempted)return this.notifications.alert(`${c.name} has been allocated already`),void this.seatAllocationForms[t].reset("");let n=this.zones.find(e=>e.controlIndex===t);n&&(n.exempted=!1,n.controlIndex=void 0),c.exempted=!0,c.controlIndex=t}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(u.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.g),b.Xb(o.e))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-new-hajj-year"]],decls:14,vars:10,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-success","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-danger","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"row"],[1,"form-group","col-sm-12","col-md-6"],["for","year"],["formControlName","year","type","text",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","status"],["formControlName","active","id","status",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","dateOpened"],["formControlName","dateOpened","type","date","for","dateOpened",1,"form-control"],["class","row mx-auto my-3 alert alert-info",4,"ngIf"],["class","row mx-auto mt-3 mb-2 text-info",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mx-auto","row"],["type","button",1,"ml-auto","btn","btn-sm","btn-outline-success",3,"click"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[3,"value"],[1,"row","mx-auto","my-3","alert","alert-info"],[1,"row","mx-auto","mt-3","mb-2","text-info"],[1,"card","shadow-lg","p-3","mb-3",3,"formGroup"],[1,"mx-auto","col-12","row"],["type","button",1,"ml-auto","btn","btn-sm","btn-outline-danger",3,"click"],["for","zone"],["formControlName","zone","id","zone",1,"form-control",3,"change"],["selected","","hidden","","value",""],[3,"value","hidden",4,"ngFor","ngForOf"],["for","group.get('seatsAllocated')"],["formControlName","seatsAllocated","type","number",1,"form-control"],[3,"value","hidden"]],template:function(e,t){if(1&e&&(b.dc(0,"form",0),b.nc("ngSubmit",function(){return t.submit()}),b.dc(1,"p",1),b.Qc(2,"Open New Hajj Year"),b.cc(),b.dc(3,"mat-dialog-content"),b.Oc(4,Ie,1,0,"ng-container",2),b.cc(),b.dc(5,"mat-dialog-actions",3),b.dc(6,"button",4),b.Qc(7," Save "),b.cc(),b.dc(8,"button",5),b.Qc(9," Cancel "),b.cc(),b.cc(),b.Oc(10,qe,24,19,"ng-template",null,6,b.Pc),b.Oc(12,Ve,1,0,"ng-template",null,7,b.Pc),b.cc()),2&e){const e=b.Gc(11),c=b.Gc(13);b.yc("formGroup",t.hajjYearForm),b.Kb(4),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",c)("ngIfElse",e),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible||t.hajjYearForm.valid),b.yc("disabled",t.loader.loaderVisible||t.hajjYearForm.invalid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.i,l.h,l.e,n.o,l.c,l.d,o.c,o.p,o.g,o.y,n.n,o.t,o.A,o.u,m.a],styles:[""]}),e})();function Ye(e,t){1&e&&b.Zb(0)}function De(e,t){if(1&e&&(b.dc(0,"option",25),b.Qc(1),b.cc()),2&e){const e=t.$implicit;b.yc("value",e._id)("hidden",e.exempted),b.Kb(1),b.Rc(e.name)}}function Ze(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Enrollment center is required "),b.cc())}function _e(e,t){if(1&e&&(b.dc(0,"div",26),b.Oc(1,Ze,2,0,"div",27),b.cc()),2&e){const e=b.rc().$implicit;b.Kb(1),b.yc("ngIf",e.get("zone").errors.required)}}function Be(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Seat allocated is required "),b.cc())}function Ue(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Enter a valid seat number "),b.cc())}function He(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){const e=b.rc(2).$implicit;b.Kb(1),b.Sc(" Seat allocation must be atleast ",e.get("seatsAllocated").errors.min.min,". ")}}function Je(e,t){if(1&e&&(b.dc(0,"div",26),b.Oc(1,Be,2,0,"div",27),b.Oc(2,Ue,2,0,"div",27),b.Oc(3,He,2,1,"div",27),b.cc()),2&e){const e=b.rc().$implicit;b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").errors.required),b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").errors.pattern),b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").errors.min)}}function We(e,t){if(1&e){const e=b.ec();b.bc(0),b.dc(1,"form",13),b.dc(2,"div",14),b.dc(3,"div",2),b.Qc(4),b.cc(),b.dc(5,"button",15),b.nc("click",function(){b.Ic(e);const c=t.index;return b.rc(2).removeSeatAllocation(c)}),b.Qc(6," Remove "),b.cc(),b.cc(),b.dc(7,"div",16),b.dc(8,"div",17),b.dc(9,"label",18),b.Qc(10,"Center"),b.cc(),b.dc(11,"select",19),b.nc("change",function(){b.Ic(e);const c=t.$implicit,n=t.index;return b.rc(2).exemptZone(c.get("zone").value,n)}),b.dc(12,"option",20),b.Qc(13,"Select center"),b.cc(),b.Oc(14,De,2,3,"option",21),b.cc(),b.Oc(15,_e,2,1,"div",22),b.cc(),b.dc(16,"div",17),b.dc(17,"label",23),b.Qc(18,"Seats"),b.cc(),b.Yb(19,"input",24),b.Oc(20,Je,4,3,"div",22),b.cc(),b.cc(),b.cc(),b.ac()}if(2&e){const e=t.$implicit,c=t.index,n=b.rc(2);b.Kb(1),b.yc("formGroup",e),b.Kb(3),b.Sc(" #",c+1," "),b.Kb(5),b.Pb("text-danger",e.get("zone").invalid&&e.get("zone").touched),b.Kb(2),b.Pb("border-danger",e.get("zone").invalid&&e.get("zone").touched),b.Kb(3),b.yc("ngForOf",n.zones),b.Kb(1),b.yc("ngIf",e.get("zone").touched&&e.get("zone").invalid),b.Kb(2),b.Pb("text-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),b.Kb(2),b.Pb("border-danger",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid),b.Kb(1),b.yc("ngIf",e.get("seatsAllocated").touched&&e.get("seatsAllocated").invalid)}}function et(e,t){if(1&e){const e=b.ec();b.Oc(0,We,21,13,"ng-container",10),b.dc(1,"div",11),b.dc(2,"button",12),b.nc("click",function(){return b.Ic(e),b.rc().addSeatAllocation()}),b.Qc(3," Add Center "),b.cc(),b.cc()}if(2&e){const e=b.rc();b.yc("ngForOf",e.seatAllocationForms)}}function tt(e,t){1&e&&b.Yb(0,"app-loader")}let ct=(()=>{class e{constructor(e,t,c,n,i,a){this.data=e,this.fb=t,this.loader=c,this.notifications=n,this.dialogRef=i,this.dataService=a,this.zones=[],this.token=sessionStorage.getItem("token"),this.subscription=new r.a}ngOnInit(){this.zones=[...this.data.zones],this.initializeForm()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}initializeForm(){this.seatAllocations=new o.d([this.form])}submit(){const e={seatAllocations:this.seatAllocations.value};this.notifications.prompt("Are you sure you want to proceed?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.years}/add-allocation`,this.data.yearId,e,this.token).subscribe(e=>{this.loader.hideLoader(),this.notifications.successToast("Seats allocated to center successfully."),this.dialogRef.close(!0)}))})}addSeatAllocation(){if(this.seatAllocationForms.length===this.data.remainingSlots)return this.notifications.alert("You've allocated seats to all centers for this year.");this.seatAllocations.push(this.form)}removeSeatAllocation(e){const t=this.seatAllocations.controls.splice(e,1);this.zones.forEach(e=>{e._id===t[0].get("zone").value&&(e.exempted=!1,e.controlIndex=void 0)})}exemptZone(e,t){const c=this.zones.find(t=>t._id===e);if(c.exempted)return this.notifications.alert(`${c.name} has been allocated already`),void this.seatAllocationForms[t].reset("");let n=this.zones.find(e=>e.controlIndex===t);n&&(n.exempted=!1,n.controlIndex=void 0),c.exempted=!0,c.controlIndex=t}get seatAllocationForms(){return this.seatAllocations.controls}get form(){return this.fb.group({zone:["",o.z.required],seatsAllocated:["",[o.z.required,o.z.pattern(/^[0-9]+$/),o.z.min(0)]]})}get formValid(){return this.seatAllocationForms.every(e=>!0===e.valid)}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(l.a),b.Xb(o.e),b.Xb(u.a),b.Xb(h.a),b.Xb(l.g),b.Xb(g.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-add-seat-allocations"]],decls:17,vars:11,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"col-12","mx-auto","row"],[1,"mr-auto"],[1,"ml-auto","text-danger"],[4,"ngIf","ngIfThen","ngIfElse"],["show",""],["load",""],["align","end"],["type","submit",1,"btn-outline-success","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-danger","btn-sm","btn","ml-2",3,"disabled"],[4,"ngFor","ngForOf"],[1,"mx-auto","row","mb-2"],["type","button",1,"ml-auto","btn","btn-sm","btn-warning","text-white",3,"click"],[1,"card","shadow","p-3","mb-3",3,"formGroup"],[1,"mx-auto","col-12","row"],["type","button",1,"ml-auto","btn","btn-sm","btn-outline-danger",3,"click"],[1,"row"],[1,"form-group","col-sm-12","col-md-6"],["for","zone"],["formControlName","zone","id","zone",1,"form-control",3,"change"],["selected","","hidden","","value",""],[3,"value","hidden",4,"ngFor","ngForOf"],["class","text-danger small mt-1",4,"ngIf"],["for","group.get('seatsAllocated')"],["formControlName","seatsAllocated","type","number",1,"form-control"],[3,"value","hidden"],[1,"text-danger","small","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e&&(b.dc(0,"form",0),b.nc("ngSubmit",function(){return t.submit()}),b.dc(1,"div",1),b.dc(2,"div",2),b.Qc(3," Add Seat Allocations "),b.cc(),b.dc(4,"div",3),b.Qc(5),b.cc(),b.cc(),b.dc(6,"mat-dialog-content"),b.Oc(7,Ye,1,0,"ng-container",4),b.cc(),b.Oc(8,et,4,1,"ng-template",null,5,b.Pc),b.Oc(10,tt,1,0,"ng-template",null,6,b.Pc),b.dc(12,"mat-dialog-actions",7),b.dc(13,"button",8),b.Qc(14," Save "),b.cc(),b.dc(15,"button",9),b.Qc(16," Cancel "),b.cc(),b.cc(),b.cc()),2&e){const e=b.Gc(9),c=b.Gc(11);b.yc("formGroup",t.seatAllocations),b.Kb(5),b.Sc(" Unallocated centers: ",t.data.remainingSlots," "),b.Kb(2),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",c)("ngIfElse",e),b.Kb(6),b.Pb("magnifyText",!t.loader.loaderVisible&&t.formValid),b.yc("disabled",t.loader.loaderVisible||!t.formValid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.i,l.h,l.e,n.o,l.c,l.d,n.n,o.y,o.p,o.g,o.t,o.A,o.c,o.u,m.a],styles:[".mat-dialog-title[_ngcontent-%COMP%]{display:inline-flex}"]}),e})();function nt(e,t){1&e&&b.Zb(0)}function it(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Seat allocated is required "),b.cc())}function at(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," Enter a valid seat number "),b.cc())}function ot(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Seat allocation must be atleast ",e.errors.min.min,". ")}}function st(e,t){if(1&e&&(b.dc(0,"div",12),b.Oc(1,it,2,0,"div",13),b.Oc(2,at,2,0,"div",13),b.Oc(3,ot,2,1,"div",13),b.cc()),2&e){b.rc();const e=b.Gc(4);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.pattern),b.Kb(1),b.yc("ngIf",e.errors.min)}}function rt(e,t){if(1&e){const e=b.ec();b.dc(0,"div",7),b.dc(1,"label",8),b.Qc(2,"New Seat Number"),b.cc(),b.dc(3,"input",9,10),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().seatNumber=t}),b.cc(),b.Oc(5,st,4,3,"div",11),b.cc()}if(2&e){const e=b.Gc(4),t=b.rc();b.Kb(1),b.Pb("text-danger",e.touched&&e.invalid),b.Kb(2),b.Pb("border-danger",e.touched&&e.invalid),b.yc("ngModel",t.seatNumber),b.Kb(2),b.yc("ngIf",e.touched&&e.invalid)}}function dt(e,t){1&e&&b.Yb(0,"app-loader")}let lt=(()=>{class e{constructor(e,t,c,n,i){this.data=e,this.loader=t,this.dataService=c,this.notifications=n,this.dialogRef=i,this.seatNumber="",this.token=sessionStorage.getItem("token"),this.subscription=new r.a}ngOnInit(){console.log(this.data),this.seatNumber=this.data.zone.seatsAllocated}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}saveChanges(){this.loader.showLoader();const e={zone:this.data.zone._id,seatsAllocated:this.seatNumber};this.notifications.prompt("Are you sure you want to save these changes?").then(t=>{t.isConfirmed&&(this.subscription=this.dataService.update(`${d.a.years}/edit-seat-allocation`,this.data.yearId,e,this.token).subscribe(e=>{this.loader.hideLoader(),this.notifications.successToast("Changes have been saved successfully."),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(l.a),b.Xb(u.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.g))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-edit-seat"]],decls:14,vars:12,consts:[["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["show",""],["load",""],["align","end"],["type","button",1,"btn-outline-success","btn-sm","btn",3,"disabled","click"],["type","button","matDialogClose","",1,"btn-outline-danger","btn-sm","btn","ml-2",3,"disabled"],[1,"form-group"],["for","seatNumber"],["type","number","id","seatNumber","name","seatsAllocated","required","","min","0","pattern","^[0-9]+$",1,"form-control",3,"ngModel","ngModelChange"],["seatsAllocated","ngModel"],["class","text-danger small mt-1",4,"ngIf"],[1,"text-danger","small","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e&&(b.dc(0,"p",0),b.Qc(1),b.sc(2,"titlecase"),b.cc(),b.dc(3,"mat-dialog-content"),b.Oc(4,nt,1,0,"ng-container",1),b.cc(),b.Oc(5,rt,6,6,"ng-template",null,2,b.Pc),b.Oc(7,dt,1,0,"ng-template",null,3,b.Pc),b.dc(9,"mat-dialog-actions",4),b.dc(10,"button",5),b.nc("click",function(){return t.saveChanges()}),b.Qc(11," Save "),b.cc(),b.dc(12,"button",6),b.Qc(13," Cancel "),b.cc(),b.cc()),2&e){const e=b.Gc(6),c=b.Gc(8);b.Kb(1),b.Sc("Edit Seats: ",b.tc(2,10,t.data.zone.name),""),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",c)("ngIfElse",e),b.Kb(6),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[l.h,l.e,n.o,l.c,l.d,o.u,o.c,o.x,o.v,o.p,o.s,m.a],pipes:[n.x],styles:[""]}),e})();var bt=c("Qu3c");function ut(e,t){1&e&&(b.dc(0,"div",18),b.dc(1,"h6"),b.Qc(2,"No seats allocated yet, click add allocations to add allocations."),b.cc(),b.cc())}function gt(e,t){1&e&&(b.dc(0,"div",19),b.dc(1,"h6"),b.Qc(2,"No seats were allocated and registration closed."),b.cc(),b.cc())}function ht(e,t){1&e&&(b.dc(0,"div",20),b.dc(1,"h6"),b.Qc(2,"Seat Allocations"),b.cc(),b.cc())}function mt(e,t){if(1&e){const e=b.ec();b.bc(0),b.dc(1,"div",21),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc().editZoneSeats(c)}),b.dc(2,"div",22),b.dc(3,"h5",23),b.Qc(4),b.cc(),b.dc(5,"p",24),b.Qc(6),b.cc(),b.cc(),b.cc(),b.ac()}if(2&e){const e=t.$implicit;b.Kb(4),b.Sc(" ",e.zone.name," "),b.Kb(2),b.Sc(" Seats:\xa0\xa0\xa0",e.seatsAllocated," ")}}function ft(e,t){if(1&e){const e=b.ec();b.dc(0,"button",25),b.nc("click",function(){return b.Ic(e),b.rc().addSeatAllocation()}),b.Qc(1," Add Allocation "),b.cc()}}let pt=(()=>{class e{constructor(e,t,c,n,i){this.data=e,this.loader=t,this.dataService=c,this.dialog=n,this.dialogRef=i,this.token=sessionStorage.getItem("token"),this.zones=[],this.subscription=new r.a}ngOnInit(){this.allowAddAllocation()&&this.getZones()}ngOnDestroy(){this.subscription.unsubscribe(),this.loader.hideLoader()}allowAddAllocation(){return(new Date).getFullYear()<=parseInt(this.data.year)&&this.data.seatAllocations.length<23}get totalSeats(){let e=0;return this.data.seatAllocations.forEach(t=>e+=+t.seatsAllocated),e}getZones(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.zones,this.token).subscribe(e=>{const t=["00","01"];this.zones=e.filter(e=>!t.includes(e.code)).map(e=>this.data.seatAllocations.find(t=>t.zone._id===e._id)?(e.exempted=!0,e):(e.exempted=!1,e)),this.loader.hideLoader()})}getYearDetails(){this.loader.showLoader(),this.subscription=this.dataService.get(d.a.years,this.token,this.data._id).subscribe(e=>{this.data.seatAllocations.length=0,this.data.seatAllocations=[...e.seatAllocations],console.log(this.data),this.loader.hideLoader()})}addSeatAllocation(){window.scroll(0,0),this.dialog.open(ct,{width:"42rem",disableClose:!0,data:{zones:this.zones,yearId:this.data._id,remainingSlots:23-this.data.seatAllocations.length}}).afterClosed().subscribe(e=>{e&&this.getYearDetails()})}editZoneSeats(e){console.log(e),window.scroll(0,0),this.dialog.open(lt,{width:"25rem",disableClose:!0,data:{zone:{seatsAllocated:e.seatsAllocated,name:e.zone.name,_id:e.zone._id},yearId:this.data._id}}).afterClosed().subscribe(e=>{e&&this.getYearDetails()})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(l.a),b.Xb(u.a),b.Xb(g.a),b.Xb(l.b),b.Xb(l.g))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-view-hajj-year"]],decls:35,vars:16,consts:[["mat-dialog-title","",1,"col-12","mx-auto","row"],[1,"mr-auto"],[1,"ml-auto","text-success"],[1,"row"],[1,"form-group","col-sm-12","col-md-6"],["for","year"],["type","text","disabled","",1,"form-control",3,"value"],["for","status"],["for","dateOpened"],["for","lastClosed"],["class","row mx-auto my-3 alert alert-info",4,"ngIf"],["class","row mx-auto my-3 alert alert-danger",4,"ngIf"],["class","row mx-auto my-2 text-secondary",4,"ngIf"],[1,"cardList","py-2"],[4,"ngFor","ngForOf"],["align","end"],["type","button","class","btn-success btn-sm btn mr-2",3,"click",4,"ngIf"],["type","button","matDialogClose","",1,"btn-danger","btn-sm","btn","ml-2"],[1,"row","mx-auto","my-3","alert","alert-info"],[1,"row","mx-auto","my-3","alert","alert-danger"],[1,"row","mx-auto","my-2","text-secondary"],["matTooltip","Click to edit","matTooltipPosition","above",1,"card","shadow-lg","cardListItem","mb-3","border-success",2,"padding","0!important",3,"click"],[1,"card-body",2,"padding","1rem!important"],[1,"card-title","text-success","mb-2"],[1,"card-text"],["type","button",1,"btn-success","btn-sm","btn","mr-2",3,"click"]],template:function(e,t){1&e&&(b.dc(0,"div",0),b.dc(1,"div",1),b.Qc(2," Hajj Year Details "),b.cc(),b.dc(3,"div",2),b.Qc(4),b.cc(),b.cc(),b.dc(5,"mat-dialog-content"),b.dc(6,"div",3),b.dc(7,"div",4),b.dc(8,"label",5),b.Qc(9,"Hajj Year"),b.cc(),b.Yb(10,"input",6),b.cc(),b.dc(11,"div",4),b.dc(12,"label",7),b.Qc(13,"Status"),b.cc(),b.Yb(14,"input",6),b.cc(),b.cc(),b.dc(15,"div",3),b.dc(16,"div",4),b.dc(17,"label",8),b.Qc(18,"Date Opened"),b.cc(),b.Yb(19,"input",6),b.sc(20,"date"),b.cc(),b.dc(21,"div",4),b.dc(22,"label",9),b.Qc(23,"Last Closed"),b.cc(),b.Yb(24,"input",6),b.sc(25,"date"),b.cc(),b.cc(),b.Oc(26,ut,3,0,"div",10),b.Oc(27,gt,3,0,"div",11),b.Oc(28,ht,3,0,"div",12),b.dc(29,"div",13),b.Oc(30,mt,7,2,"ng-container",14),b.cc(),b.cc(),b.dc(31,"mat-dialog-actions",15),b.Oc(32,ft,2,0,"button",16),b.dc(33,"button",17),b.Qc(34," Close "),b.cc(),b.cc()),2&e&&(b.Kb(4),b.Sc(" Total Slots: ",t.totalSeats," "),b.Kb(6),b.yc("value",t.data.year),b.Kb(4),b.yc("value",t.data.active?"Active":"Inactive"),b.Kb(5),b.yc("value",b.uc(20,10,t.data.dateOpened,"longDate")),b.Kb(5),b.yc("value",b.uc(25,13,t.data.lastClosed,"long")),b.Kb(2),b.yc("ngIf",t.data.seatAllocations.length<1&&t.allowAddAllocation()),b.Kb(1),b.yc("ngIf",t.data.seatAllocations.length<1&&!t.allowAddAllocation()),b.Kb(1),b.yc("ngIf",t.data.seatAllocations.length>0),b.Kb(2),b.yc("ngForOf",t.data.seatAllocations),b.Kb(2),b.yc("ngIf",t.allowAddAllocation()||t.loader.loaderVisible))},directives:[l.h,l.e,n.o,n.n,l.c,l.d,bt.a],pipes:[n.f],styles:[".cardList[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start}.cardList[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{box-sizing:border-box}.cardList[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:32px}.cardListItem[_ngcontent-%COMP%]{flex:0 1 calc(25% - 32px);margin-bottom:.5rem;padding:.2rem!important;transition:.5s}.cardListItem[_ngcontent-%COMP%]:hover{background-color:#10b759;cursor:pointer}.cardListItem[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#fff!important}.mat-dialog-title[_ngcontent-%COMP%]{display:inline-flex}"]}),e})();function vt(e,t){1&e&&b.Zb(0)}function yt(e,t){if(1&e&&(b.dc(0,"option",28),b.Qc(1),b.cc()),2&e){const e=t.$implicit;b.yc("value",e),b.Kb(1),b.Sc("Show ",e," Items")}}function It(e,t){if(1&e){const e=b.ec();b.dc(0,"div",23),b.dc(1,"div",24),b.dc(2,"select",25),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().pageSize=t})("change",function(){return b.Ic(e),b.rc().onPageSizeChange()}),b.Oc(3,yt,2,2,"option",26),b.cc(),b.cc(),b.dc(4,"pagination-controls",27),b.nc("pageChange",function(t){return b.Ic(e),b.rc().onNavigate(t)}),b.cc(),b.cc()}if(2&e){const e=b.rc();b.Kb(2),b.yc("ngModel",e.pageSize),b.Kb(1),b.yc("ngForOf",e.pages)}}function St(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.dc(3,"app-loader"),b.Qc(4,"Fetching data..."),b.cc(),b.cc(),b.cc(),b.cc())}function xt(e,t){1&e&&b.Zb(0)}function Ot(e,t){if(1&e&&b.Oc(0,xt,1,0,"ng-container",17),2&e){const e=b.rc(),t=b.Gc(36),c=b.Gc(34);b.yc("ngIf",e.years.length>0)("ngIfThen",t)("ngIfElse",c)}}function Kt(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3,"No record(s) to display"),b.cc(),b.cc(),b.cc())}function wt(e,t){1&e&&(b.dc(0,"th"),b.Qc(1,"Actions"),b.cc())}function Qt(e,t){1&e&&(b.dc(0,"th"),b.Qc(1,"Status"),b.cc())}function kt(e,t){if(1&e&&(b.dc(0,"span"),b.Qc(1),b.cc()),2&e){const e=b.rc().$implicit;b.Pb("text-success",e.active)("text-danger",!e.active),b.Kb(1),b.Sc(" ",e.active?"Active":"Closed"," ")}}function Ct(e,t){if(1&e){const e=b.ec();b.dc(0,"button",39),b.nc("click",function(){b.Ic(e);const t=b.rc().$implicit;return b.rc(2).reopenHajjYear(t)}),b.Qc(1," Reopen Year "),b.cc()}}function Pt(e,t){if(1&e){const e=b.ec();b.dc(0,"button",40),b.nc("click",function(){b.Ic(e);const t=b.rc().$implicit;return b.rc(2).closeHajjYear(t)}),b.Qc(1," Close Year "),b.cc()}}function At(e,t){if(1&e){const e=b.ec();b.dc(0,"tbody"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3),b.cc(),b.dc(4,"td"),b.Qc(5),b.cc(),b.dc(6,"td"),b.Qc(7),b.sc(8,"date"),b.cc(),b.dc(9,"td"),b.Qc(10),b.sc(11,"date"),b.cc(),b.dc(12,"td"),b.Oc(13,kt,2,5,"span",35),b.Qc(14," \xa0 \xa0 "),b.dc(15,"button",36),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).viewHajjYear(c)}),b.Qc(16," View "),b.cc(),b.Qc(17," \xa0 \xa0 "),b.Oc(18,Ct,2,0,"button",37),b.Oc(19,Pt,2,0,"button",38),b.cc(),b.cc(),b.cc()}if(2&e){const e=t.index,c=t.$implicit,n=b.rc(2);b.Kb(3),b.Rc((n.p-1)*n.pageSize+(e+1)),b.Kb(2),b.Rc(c.year),b.Kb(2),b.Rc(b.uc(8,7,c.dateOpened,"mediumDate")),b.Kb(3),b.Rc(b.uc(11,10,c.lastClosed,"medium")),b.Kb(3),b.yc("ngIf",""===n.active),b.Kb(5),b.yc("ngIf",n.currentYear<=c.year&&!c.active),b.Kb(1),b.yc("ngIf","active"===n.active)}}const Lt=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function Tt(e,t){if(1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"th",29),b.Qc(3,"S/N"),b.cc(),b.dc(4,"th",30),b.Qc(5,"Year"),b.cc(),b.dc(6,"th",31),b.Qc(7,"Open Date"),b.cc(),b.dc(8,"th",32),b.Qc(9,"Last Closed Date"),b.cc(),b.Oc(10,wt,2,0,"th",33),b.Oc(11,Qt,2,0,"th",33),b.cc(),b.cc(),b.Oc(12,At,20,13,"tbody",34),b.sc(13,"paginate"),b.sc(14,"filter")),2&e){const e=b.rc();b.Kb(2),b.yc("appSort",e.years),b.Kb(2),b.yc("appSort",e.years),b.Kb(2),b.yc("appSort",e.years),b.Kb(2),b.yc("appSort",e.years),b.Kb(2),b.yc("ngIf","active"===e.active),b.Kb(1),b.yc("ngIf",""===e.active),b.Kb(1),b.yc("ngForOf",b.uc(13,7,b.uc(14,10,e.years,e.searchText),b.Ec(13,Lt,e.pageSize,e.p,e.totalItems)))}}let zt=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.currentYear=pe(new Date).format("YYYY"),this.years=[],this.p=1,this.pageSize=5,this.pages=[5,10,15,20],this.totalItems=0,this.active="active",this.display="Active Year",this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.tabClick("active")}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}tabClick(e){let t;switch(this.p=1,this.pageSize=5,this.active=e,e){case"active":t="get-active",this.display="Active Year";break;case"inactive":t="get-inactive",this.display="Closed Years";break;default:t="",this.display="All Years"}this.getYears(t)}onPageSizeChange(){this.onNavigate(1)}onNavigate(e){let t;switch(e&&(this.p=e),this.active){case"active":t="get-active";break;case"inactive":t="get-inactive";break;default:t=""}this.getYears(t,this.pageSize,this.p)}getYears(e,t,c){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.years}/${e}`,this.token,null,{pageSize:t,page:c}).subscribe(e=>{this.years=[...e.years],this.totalItems=e.totalDocs,this.loader.hideLoader()})}closeHajjYear(e){this.notifications.prompt(`Close ${e.year} hajj ?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.years}/close-hajj-year/${e._id}`,"",{},this.token).subscribe(e=>{this.notifications.successToast(`${e.year} hajj has been successfully closed.`),this.tabClick("inactive")}))})}reopenHajjYear(e){this.notifications.prompt(`Reopen ${e.year} hajj ?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.years}/reopen-hajj-year/${e._id}`,"",{},this.token).subscribe(e=>{this.notifications.successToast(`${e.year} hajj has been successfully reopened.`),this.tabClick("active")}))})}openNewHajjYear(){window.scroll(0,0),this.dialog.open(Xe,{width:"42rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.tabClick(this.active)})}viewHajjYear(e){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.years}/${e._id}`,this.token).subscribe(e=>{this.loader.hideLoader(),window.scroll(0,0),this.dialog.open(pt,{width:"50rem",data:e,disableClose:!0}).afterClosed().subscribe(e=>{e&&this.tabClick(this.active)})})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(M.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.b))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-hajj-year"]],decls:37,vars:18,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12",2,"text-align","center"],["role","group",1,"btn-group","mb-4"],["type","button",1,"magnifyText","btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"disabled","click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],["class","col-12 mx-auto mt-3",4,"ngIf"],["load",""],["show",""],["noData",""],["tableData",""],[1,"col-12","mx-auto","mt-3"],[1,"float-left"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],[3,"value"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","year",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","dateOpened",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","lastClosed",1,"sort",3,"appSort"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"text-success","text-danger",4,"ngIf"],["type","button",1,"btn","magnifyText","btn-outline-success","btn-sm",3,"click"],["type","button","class","btn magnifyText btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","button","class","btn magnifyText btn-danger btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","magnifyText","btn-danger","btn-sm",3,"click"]],template:function(e,t){if(1&e&&(b.dc(0,"nav",0),b.dc(1,"ol",1),b.dc(2,"li",2),b.dc(3,"a",3),b.Qc(4,"Hajj Years"),b.cc(),b.cc(),b.dc(5,"li",4),b.Qc(6),b.cc(),b.cc(),b.cc(),b.dc(7,"div",5),b.dc(8,"div",6),b.dc(9,"button",7),b.nc("click",function(){return t.tabClick("active")}),b.Qc(10," Active "),b.cc(),b.dc(11,"button",7),b.nc("click",function(){return t.tabClick("inactive")}),b.Qc(12," Closed "),b.cc(),b.dc(13,"button",7),b.nc("click",function(){return t.tabClick("")}),b.Qc(14," All Years "),b.cc(),b.cc(),b.cc(),b.dc(15,"div",8),b.dc(16,"div",9),b.dc(17,"div",10),b.dc(18,"div",11),b.dc(19,"h6",12),b.Qc(20,"HAJJ YEARS MASTER LIST"),b.cc(),b.dc(21,"button",13),b.nc("click",function(){return t.openNewHajjYear()}),b.dc(22,"span"),b.Qc(23,"Open New Hajj Year"),b.cc(),b.cc(),b.dc(24,"input",14),b.nc("ngModelChange",function(e){return t.searchText=e}),b.cc(),b.dc(25,"div",15),b.dc(26,"table",16),b.Oc(27,vt,1,0,"ng-container",17),b.cc(),b.Oc(28,It,5,2,"div",18),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.Oc(29,St,5,0,"ng-template",null,19,b.Pc),b.Oc(31,Ot,1,3,"ng-template",null,20,b.Pc),b.Oc(33,Kt,4,0,"ng-template",null,21,b.Pc),b.Oc(35,Tt,15,17,"ng-template",null,22,b.Pc)),2&e){const e=b.Gc(30),c=b.Gc(32);b.Kb(6),b.Rc(t.display),b.Kb(3),b.Pb("btn-active","active"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(2),b.Pb("btn-active","inactive"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(2),b.Pb("btn-active",""===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(8),b.Pb("magnifyText",!t.loader.loaderVisible&&"active"===t.active),b.yc("disabled",t.loader.loaderVisible||"active"!==t.active),b.Kb(3),b.yc("ngModel",t.searchText),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c),b.Kb(1),b.yc("ngIf",t.years.length>0)}},directives:[o.c,o.p,o.s,n.o,o.y,n.n,i.c,o.t,o.A,m.a,F.a],pipes:[i.b,N.a,n.f],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function Gt(e,t){1&e&&b.Zb(0)}function Rt(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function Mt(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Bank name must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function Ft(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" Bank name must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function Nt(e,t){if(1&e&&(b.dc(0,"div",14),b.Oc(1,Rt,2,0,"div",15),b.Oc(2,Mt,2,1,"div",15),b.Oc(3,Ft,2,1,"div",15),b.cc()),2&e){b.rc();const e=b.Gc(4);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function Et(e,t){if(1&e){const e=b.ec();b.dc(0,"div",9),b.dc(1,"label",10),b.Qc(2,"Bank Name"),b.cc(),b.dc(3,"input",11,12),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().bankName=t}),b.cc(),b.Oc(5,Nt,4,3,"div",13),b.cc()}if(2&e){const e=b.Gc(4),t=b.rc();b.Kb(1),b.Pb("text-danger",e.touched&&e.invalid),b.Kb(2),b.Pb("error-control",e.touched&&e.invalid),b.yc("ngModel",t.bankName),b.Kb(2),b.yc("ngIf",e.touched&&e.invalid)}}function $t(e,t){1&e&&(b.dc(0,"app-loader"),b.Qc(1,"Please wait..."),b.cc())}let jt=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.action="Add New Bank",this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.bankName=""}ngOnInit(){this.data&&(this.action="Edit Bank",this.bankName=this.data.name)}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt(this.data?"Save changes?":"Create bank?").then(t=>{if(t.isConfirmed){this.loader.showLoader();const t=d.a.banks;this.data?this.updateExisting(this.data._id,t,e):this.saveNewBank(e,t)}})}saveNewBank(e,t){this.subscription=this.dataService.post(t,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} created successfully.`),this.loader.hideLoader(),this.dialogRef.close(!0)})}updateExisting(e,t,c){this.subscription=this.dataService.update(t,e,c,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} successfully updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(u.a),b.Xb(g.a),b.Xb(l.g),b.Xb(h.a),b.Xb(l.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-edit-bank"]],decls:15,vars:10,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","5","maxlength","255","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=b.ec();b.dc(0,"form",0,1),b.nc("ngSubmit",function(){b.Ic(e);const c=b.Gc(1);return t.submit(c.value)}),b.dc(2,"p",2),b.Qc(3),b.cc(),b.dc(4,"mat-dialog-content"),b.Oc(5,Gt,1,0,"ng-container",3),b.cc(),b.dc(6,"mat-dialog-actions",4),b.dc(7,"button",5),b.Qc(8," Save "),b.cc(),b.dc(9,"button",6),b.Qc(10," Cancel "),b.cc(),b.cc(),b.Oc(11,Et,6,6,"ng-template",null,7,b.Pc),b.Oc(13,$t,2,0,"ng-template",null,8,b.Pc),b.cc()}if(2&e){const e=b.Gc(1),c=b.Gc(12),n=b.Gc(14);b.Kb(3),b.Rc(t.action),b.Kb(2),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible||e.valid),b.yc("disabled",t.loader.loaderVisible||e.invalid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.o,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function qt(e,t){1&e&&b.Zb(0)}function Vt(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.dc(3,"app-loader"),b.Qc(4,"Fetching data..."),b.cc(),b.cc(),b.cc(),b.cc())}function Xt(e,t){1&e&&b.Zb(0)}function Yt(e,t){if(1&e&&b.Oc(0,Xt,1,0,"ng-container",17),2&e){const e=b.rc(),t=b.Gc(35),c=b.Gc(33);b.yc("ngIf",e.banks.length>0)("ngIfThen",t)("ngIfElse",c)}}function Dt(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3,"No record(s) to display"),b.cc(),b.cc(),b.cc())}function Zt(e,t){if(1&e){const e=b.ec();b.dc(0,"button",30),b.nc("click",function(){b.Ic(e);const t=b.rc().$implicit;return b.rc(2).activateBank(t)}),b.dc(1,"span"),b.Qc(2,"Activate"),b.cc(),b.cc()}if(2&e){const e=b.rc(3);b.Pb("magnifyText",!e.loader.loaderVisible),b.yc("disabled",e.loader.loaderVisible)}}function _t(e,t){if(1&e){const e=b.ec();b.dc(0,"button",31),b.nc("click",function(){b.Ic(e);const t=b.rc().$implicit;return b.rc(2).deactivateBank(t)}),b.dc(1,"span"),b.Qc(2,"Deactivate"),b.cc(),b.cc()}if(2&e){const e=b.rc(3);b.Pb("magnifyText",!e.loader.loaderVisible),b.yc("disabled",e.loader.loaderVisible)}}function Bt(e,t){if(1&e){const e=b.ec();b.dc(0,"tbody"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3),b.cc(),b.dc(4,"td"),b.Qc(5),b.cc(),b.dc(6,"td"),b.dc(7,"button",27),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).editBank(c)}),b.Qc(8," Edit Bank "),b.cc(),b.Oc(9,Zt,3,3,"button",28),b.Oc(10,_t,3,3,"button",29),b.cc(),b.cc(),b.cc()}if(2&e){const e=t.index,c=t.$implicit,n=b.rc(2);b.Kb(3),b.Rc(10*(n.p-1)+(e+1)),b.Kb(2),b.Rc(c.name),b.Kb(4),b.yc("ngIf","inactive"===n.active),b.Kb(1),b.yc("ngIf","active"===n.active)}}const Ut=function(e){return{itemsPerPage:10,currentPage:e}};function Ht(e,t){if(1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"th",24),b.Qc(3,"S/N"),b.cc(),b.dc(4,"th",25),b.Qc(5,"Name"),b.cc(),b.dc(6,"th"),b.Qc(7,"Actions"),b.cc(),b.cc(),b.cc(),b.Oc(8,Bt,11,4,"tbody",26),b.sc(9,"paginate"),b.sc(10,"filter")),2&e){const e=b.rc();b.Kb(2),b.yc("appSort",e.banks),b.Kb(2),b.yc("appSort",e.banks),b.Kb(4),b.yc("ngForOf",b.uc(9,3,b.uc(10,6,e.banks,e.searchText),b.Cc(9,Ut,e.p)))}}let Jt=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.active="active",this.display="Active Banks",this.banks=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getBanks()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}tabClick(e){let t;switch(this.p=1,this.active=e,e){case"active":t=!1,this.display="Active Banks";break;case"inactive":t=!0,this.display="Inactive Banks"}this.getBanks(t)}getBanks(e){this.loader.showLoader();let t=`${d.a.banks}`;e&&(t=`${d.a.banks}/inactive`),this.subscription=this.dataService.get(t,this.token).subscribe(e=>{this.banks=[...e],this.loader.hideLoader()})}deactivateBank(e){this.notifications.prompt(`Are you sure you want to deactivate ${e.name}?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.banks}/deactivate`,e._id,{},this.token).subscribe(e=>{this.notifications.successToast("Bank successfully deactivated."),console.log(e),this.tabClick("active")}))})}activateBank(e){this.notifications.prompt(`Are you sure you want to activate ${e.name}?`).then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(`${d.a.banks}/activate`,e._id,{},this.token).subscribe(e=>{this.notifications.successToast("Bank successfully activated."),this.tabClick("inactive")}))})}editBank(e){window.scroll(0,0),this.dialog.open(jt,{data:e||null,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getBanks()})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(M.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.b))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-banks"]],decls:36,vars:13,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12",2,"text-align","center"],["role","group",1,"btn-group","mb-4"],["type","button",1,"magnifyText","btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],[1,"btn","btn-success","mb-4",3,"disabled","click"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"],["class","btn btn-outline-success ml-4",3,"magnifyText","disabled","click",4,"ngIf"],["class","btn btn-danger ml-4",3,"magnifyText","disabled","click",4,"ngIf"],[1,"btn","btn-outline-success","ml-4",3,"disabled","click"],[1,"btn","btn-danger","ml-4",3,"disabled","click"]],template:function(e,t){if(1&e&&(b.dc(0,"nav",0),b.dc(1,"ol",1),b.dc(2,"li",2),b.dc(3,"a",3),b.Qc(4,"Banks"),b.cc(),b.cc(),b.dc(5,"li",4),b.Qc(6,"All Banks"),b.cc(),b.cc(),b.cc(),b.dc(7,"div",5),b.dc(8,"div",6),b.dc(9,"button",7),b.nc("click",function(){return t.tabClick("active")}),b.Qc(10," Active "),b.cc(),b.dc(11,"button",7),b.nc("click",function(){return t.tabClick("inactive")}),b.Qc(12," Inactive "),b.cc(),b.cc(),b.cc(),b.dc(13,"div",8),b.dc(14,"div",9),b.dc(15,"div",10),b.dc(16,"div",11),b.dc(17,"h6",12),b.Qc(18,"BANKS MASTER LIST"),b.cc(),b.dc(19,"button",13),b.nc("click",function(){return t.editBank()}),b.dc(20,"span"),b.Qc(21,"Add New Bank"),b.cc(),b.cc(),b.dc(22,"input",14),b.nc("ngModelChange",function(e){return t.searchText=e}),b.cc(),b.dc(23,"div",15),b.dc(24,"table",16),b.Oc(25,qt,1,0,"ng-container",17),b.cc(),b.dc(26,"div",18),b.dc(27,"pagination-controls",19),b.nc("pageChange",function(e){return t.p=e}),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.Oc(28,Vt,5,0,"ng-template",null,20,b.Pc),b.Oc(30,Yt,1,3,"ng-template",null,21,b.Pc),b.Oc(32,Dt,4,0,"ng-template",null,22,b.Pc),b.Oc(34,Ht,11,11,"ng-template",null,23,b.Pc)),2&e){const e=b.Gc(29),c=b.Gc(31);b.Kb(9),b.Pb("btn-active","active"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(2),b.Pb("btn-active","inactive"===t.active),b.yc("disabled",t.loader.loaderVisible),b.Kb(8),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible),b.Kb(3),b.yc("ngModel",t.searchText),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[o.c,o.p,o.s,n.o,i.c,m.a,F.a,n.n],pipes:[i.b,N.a],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function Wt(e,t){1&e&&b.Zb(0)}function ec(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function tc(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" State must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function cc(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" State must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function nc(e,t){if(1&e&&(b.dc(0,"div",14),b.Oc(1,ec,2,0,"div",15),b.Oc(2,tc,2,1,"div",15),b.Oc(3,cc,2,1,"div",15),b.cc()),2&e){b.rc();const e=b.Gc(4);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function ic(e,t){if(1&e){const e=b.ec();b.dc(0,"div",9),b.dc(1,"label",10),b.Qc(2,"State"),b.cc(),b.dc(3,"input",11,12),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().stateName=t}),b.cc(),b.Oc(5,nc,4,3,"div",13),b.cc()}if(2&e){const e=b.Gc(4),t=b.rc();b.Kb(1),b.Pb("text-danger",e.touched&&e.invalid),b.Kb(2),b.Pb("error-control",e.touched&&e.invalid),b.yc("ngModel",t.stateName),b.Kb(2),b.yc("ngIf",e.touched&&e.invalid)}}function ac(e,t){1&e&&(b.dc(0,"app-loader"),b.Qc(1,"Please wait..."),b.cc())}let oc=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.stateName=""}ngOnInit(){this.stateName=this.data.name}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt("Save changes made?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(d.a.states,this.data._id,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} state has been updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(u.a),b.Xb(g.a),b.Xb(l.g),b.Xb(h.a),b.Xb(l.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-edit-state"]],decls:15,vars:9,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","3","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=b.ec();b.dc(0,"form",0,1),b.nc("ngSubmit",function(){b.Ic(e);const c=b.Gc(1);return t.submit(c.value)}),b.dc(2,"p",2),b.Qc(3,"Edit State"),b.cc(),b.dc(4,"mat-dialog-content"),b.Oc(5,Wt,1,0,"ng-container",3),b.cc(),b.dc(6,"mat-dialog-actions",4),b.dc(7,"button",5),b.Qc(8," Save "),b.cc(),b.dc(9,"button",6),b.Qc(10," Cancel "),b.cc(),b.cc(),b.Oc(11,ic,6,6,"ng-template",null,7,b.Pc),b.Oc(13,ac,2,0,"ng-template",null,8,b.Pc),b.cc()}if(2&e){const e=b.Gc(1),c=b.Gc(12),n=b.Gc(14);b.Kb(5),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible||e.valid),b.yc("disabled",t.loader.loaderVisible||e.invalid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.o,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function sc(e,t){1&e&&b.Zb(0)}function rc(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.dc(3,"app-loader"),b.Qc(4,"Fetching data..."),b.cc(),b.cc(),b.cc(),b.cc())}function dc(e,t){1&e&&b.Zb(0)}function lc(e,t){if(1&e&&b.Oc(0,dc,1,0,"ng-container",13),2&e){const e=b.rc(),t=b.Gc(26),c=b.Gc(24);b.yc("ngIf",e.states.length>0)("ngIfThen",t)("ngIfElse",c)}}function bc(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3,"No record(s) to display"),b.cc(),b.cc(),b.cc())}function uc(e,t){if(1&e){const e=b.ec();b.dc(0,"tbody"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3),b.cc(),b.dc(4,"td"),b.Qc(5),b.cc(),b.dc(6,"td"),b.dc(7,"button",23),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).editState(c)}),b.Qc(8," Edit State "),b.cc(),b.cc(),b.cc(),b.cc()}if(2&e){const e=t.index,c=t.$implicit,n=b.rc(2);b.Kb(3),b.Rc(10*(n.p-1)+(e+1)),b.Kb(2),b.Rc(c.name)}}const gc=function(e){return{itemsPerPage:10,currentPage:e}};function hc(e,t){if(1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"th",20),b.Qc(3,"S/N"),b.cc(),b.dc(4,"th",21),b.Qc(5,"Name"),b.cc(),b.dc(6,"th"),b.Qc(7,"Actions"),b.cc(),b.cc(),b.cc(),b.Oc(8,uc,9,2,"tbody",22),b.sc(9,"paginate"),b.sc(10,"filter")),2&e){const e=b.rc();b.Kb(2),b.yc("appSort",e.states),b.Kb(2),b.yc("appSort",e.states),b.Kb(4),b.yc("ngForOf",b.uc(9,3,b.uc(10,6,e.states,e.searchText),b.Cc(9,gc,e.p)))}}let mc=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.states=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getStates()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}getStates(){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.states}`,this.token).subscribe(e=>{this.states=e.filter(e=>"default"!==e.name),this.loader.hideLoader()})}editState(e){window.scroll(0,0),this.dialog.open(oc,{data:e,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getStates()})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(M.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.b))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-states"]],decls:27,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-3",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["load",""],["show",""],["noData",""],["tableData",""],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"]],template:function(e,t){if(1&e&&(b.dc(0,"nav",0),b.dc(1,"ol",1),b.dc(2,"li",2),b.dc(3,"a",3),b.Qc(4,"States"),b.cc(),b.cc(),b.dc(5,"li",4),b.Qc(6,"All States"),b.cc(),b.cc(),b.cc(),b.dc(7,"div",5),b.dc(8,"div",6),b.dc(9,"div",7),b.dc(10,"div",8),b.dc(11,"h6",9),b.Qc(12,"STATES MASTER LIST"),b.cc(),b.dc(13,"input",10),b.nc("ngModelChange",function(e){return t.searchText=e}),b.cc(),b.dc(14,"div",11),b.dc(15,"table",12),b.Oc(16,sc,1,0,"ng-container",13),b.cc(),b.dc(17,"div",14),b.dc(18,"pagination-controls",15),b.nc("pageChange",function(e){return t.p=e}),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.Oc(19,rc,5,0,"ng-template",null,16,b.Pc),b.Oc(21,lc,1,3,"ng-template",null,17,b.Pc),b.Oc(23,bc,4,0,"ng-template",null,18,b.Pc),b.Oc(25,hc,11,11,"ng-template",null,19,b.Pc)),2&e){const e=b.Gc(20),c=b.Gc(22);b.Kb(13),b.yc("ngModel",t.searchText),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c)}},directives:[o.c,o.p,o.s,n.o,i.c,m.a,F.a,n.n],pipes:[i.b,N.a],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();function fc(e,t){1&e&&b.Zb(0)}function pc(e,t){1&e&&(b.dc(0,"div"),b.Qc(1," This field is required. "),b.cc())}function vc(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" State must be minimum ",e.errors.minlength.requiredLength," characters. ")}}function yc(e,t){if(1&e&&(b.dc(0,"div"),b.Qc(1),b.cc()),2&e){b.rc(2);const e=b.Gc(4);b.Kb(1),b.Sc(" State must be maximum ",e.errors.maxlength.requiredLength," characters. ")}}function Ic(e,t){if(1&e&&(b.dc(0,"div",14),b.Oc(1,pc,2,0,"div",15),b.Oc(2,vc,2,1,"div",15),b.Oc(3,yc,2,1,"div",15),b.cc()),2&e){b.rc();const e=b.Gc(4);b.Kb(1),b.yc("ngIf",e.errors.required),b.Kb(1),b.yc("ngIf",e.errors.minlength),b.Kb(1),b.yc("ngIf",e.errors.maxlength)}}function Sc(e,t){if(1&e){const e=b.ec();b.dc(0,"div",9),b.dc(1,"label",10),b.Qc(2,"Local Government"),b.cc(),b.dc(3,"input",11,12),b.nc("ngModelChange",function(t){return b.Ic(e),b.rc().lgaName=t}),b.cc(),b.Oc(5,Ic,4,3,"div",13),b.cc()}if(2&e){const e=b.Gc(4),t=b.rc();b.Kb(1),b.Pb("text-danger",e.touched&&e.invalid),b.Kb(2),b.Pb("error-control",e.touched&&e.invalid),b.yc("ngModel",t.lgaName),b.Kb(2),b.yc("ngIf",e.touched&&e.invalid)}}function xc(e,t){1&e&&(b.dc(0,"app-loader"),b.Qc(1,"Please wait..."),b.cc())}let Oc=(()=>{class e{constructor(e,t,c,n,i){this.loader=e,this.dataService=t,this.dialogRef=c,this.notifications=n,this.data=i,this.subscription=new r.a,this.token=sessionStorage.getItem("token"),this.lgaName=""}ngOnInit(){this.lgaName=this.data.name}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}submit(e){this.notifications.prompt("Save changes made?").then(t=>{t.isConfirmed&&(this.loader.showLoader(),this.subscription=this.dataService.update(d.a.lgas,this.data._id,e,this.token).subscribe(e=>{this.notifications.successToast(`${e.name} LGA has been updated.`),this.loader.hideLoader(),this.dialogRef.close(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(u.a),b.Xb(g.a),b.Xb(l.g),b.Xb(h.a),b.Xb(l.a))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-edit-local-gov"]],decls:15,vars:9,consts:[[3,"ngSubmit"],["f","ngForm"],["mat-dialog-title","",2,"font-size","150%"],[4,"ngIf","ngIfThen","ngIfElse"],["align","end"],["type","submit",1,"btn-primary","btn-sm","btn",3,"disabled"],["type","button","matDialogClose","",1,"btn-outline-primary","btn-sm","btn","ml-2",3,"disabled"],["show",""],["load",""],[1,"form-group"],["for","name"],["type","text","id","name","name","name","minlength","3","maxlength","50","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=b.ec();b.dc(0,"form",0,1),b.nc("ngSubmit",function(){b.Ic(e);const c=b.Gc(1);return t.submit(c.value)}),b.dc(2,"p",2),b.Qc(3,"Edit Local Government"),b.cc(),b.dc(4,"mat-dialog-content"),b.Oc(5,fc,1,0,"ng-container",3),b.cc(),b.dc(6,"mat-dialog-actions",4),b.dc(7,"button",5),b.Qc(8," Save "),b.cc(),b.dc(9,"button",6),b.Qc(10," Cancel "),b.cc(),b.cc(),b.Oc(11,Sc,6,6,"ng-template",null,7,b.Pc),b.Oc(13,xc,2,0,"ng-template",null,8,b.Pc),b.cc()}if(2&e){const e=b.Gc(1),c=b.Gc(12),n=b.Gc(14);b.Kb(5),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",n)("ngIfElse",c),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible||e.valid),b.yc("disabled",t.loader.loaderVisible||e.invalid),b.Kb(2),b.Pb("magnifyText",!t.loader.loaderVisible),b.yc("disabled",t.loader.loaderVisible)}},directives:[o.B,o.q,o.r,l.h,l.e,n.o,l.c,l.d,o.c,o.l,o.k,o.x,o.p,o.s,m.a],styles:[""]}),e})();function Kc(e,t){if(1&e&&(b.dc(0,"option",22),b.Qc(1),b.sc(2,"uppercase"),b.cc()),2&e){const e=t.$implicit;b.yc("value",e._id),b.Kb(1),b.Rc(b.tc(2,2,e.name))}}function wc(e,t){1&e&&b.Zb(0)}function Qc(e,t){if(1&e){const e=b.ec();b.dc(0,"div",23),b.dc(1,"pagination-controls",24),b.nc("pageChange",function(t){return b.Ic(e),b.rc().p=t}),b.cc(),b.cc()}}function kc(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.dc(3,"app-loader"),b.Qc(4,"Fetching data..."),b.cc(),b.cc(),b.cc(),b.cc())}function Cc(e,t){1&e&&b.Zb(0)}function Pc(e,t){if(1&e&&b.Oc(0,Cc,1,0,"ng-container",16),2&e){const e=b.rc(),t=b.Gc(28),c=b.Gc(26);b.yc("ngIf",e.localGovs.length>0)("ngIfThen",t)("ngIfElse",c)}}function Ac(e,t){1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3,"No record(s) to display"),b.cc(),b.cc(),b.cc())}function Lc(e,t){if(1&e){const e=b.ec();b.dc(0,"tbody"),b.dc(1,"tr"),b.dc(2,"td"),b.Qc(3),b.cc(),b.dc(4,"td"),b.Qc(5),b.cc(),b.dc(6,"td"),b.dc(7,"button",28),b.nc("click",function(){b.Ic(e);const c=t.$implicit;return b.rc(2).editLga(c)}),b.Qc(8," Edit LGA "),b.cc(),b.cc(),b.cc(),b.cc()}if(2&e){const e=t.index,c=t.$implicit,n=b.rc(2);b.Kb(3),b.Rc(10*(n.p-1)+(e+1)),b.Kb(2),b.Rc(c.name)}}const Tc=function(e){return{itemsPerPage:10,currentPage:e}};function zc(e,t){if(1&e&&(b.dc(0,"thead"),b.dc(1,"tr"),b.dc(2,"th",25),b.Qc(3,"S/N"),b.cc(),b.dc(4,"th",26),b.Qc(5,"Name"),b.cc(),b.dc(6,"th"),b.Qc(7,"Actions"),b.cc(),b.cc(),b.cc(),b.Oc(8,Lc,9,2,"tbody",27),b.sc(9,"paginate"),b.sc(10,"filter")),2&e){const e=b.rc();b.Kb(2),b.yc("appSort",e.localGovs),b.Kb(2),b.yc("appSort",e.localGovs),b.Kb(4),b.yc("ngForOf",b.uc(9,3,b.uc(10,6,e.localGovs,e.searchText),b.Cc(9,Tc,e.p)))}}let Gc=(()=>{class e{constructor(e,t,c,n){this.loader=e,this.dataService=t,this.notifications=c,this.dialog=n,this.searchText="",this.stateId="",this.states=[],this.localGovs=[],this.p=1,this.subscription=new r.a,this.token=sessionStorage.getItem("token")}ngOnInit(){this.getStates()}ngOnDestroy(){this.loader.hideLoader(),this.subscription.unsubscribe()}getStates(){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.states}`,this.token).subscribe(e=>{this.states=e.filter(e=>"default"!==e.name),this.stateId=this.states[0]._id,this.getLgas(),this.loader.hideLoader()})}getLgas(){this.loader.showLoader(),this.subscription=this.dataService.get(`${d.a.lgas}/by-state`,this.token,this.stateId).subscribe(e=>{this.localGovs=[...e],this.loader.hideLoader()})}editLga(e){window.scroll(0,0),this.dialog.open(Oc,{data:e,width:"32rem",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getLgas()})}}return e.\u0275fac=function(t){return new(t||e)(b.Xb(M.a),b.Xb(g.a),b.Xb(h.a),b.Xb(l.b))},e.\u0275cmp=b.Rb({type:e,selectors:[["app-local-govs"]],decls:29,vars:7,consts:[[1,"page-breadcrumb"],[1,"breadcrumb",2,"font-size","150%"],[1,"breadcrumb-item"],[1,"text-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body",2,"overflow-x","auto"],[1,"card-title"],["id","state","name","state","required","",1,"form-control","col-sm-12","col-md-3","float-left","mb-4",2,"border-radius","2px",3,"ngModel","ngModelChange","change"],["state","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","search","name","search","placeholder","Search",1,"form-control","col-sm-12","col-md-3","float-right","mb-4",3,"ngModel","ngModelChange"],[1,"table-responsive",2,"overflow-y","hidden!important"],[1,"table"],[4,"ngIf","ngIfThen","ngIfElse"],["class","col-12 mx-auto mt-3",4,"ngIf"],["load",""],["show",""],["noData",""],["tableData",""],[3,"value"],[1,"col-12","mx-auto","mt-3"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"float-right",3,"pageChange"],["scope","col","data-order","desc","data-name","sn",1,"sort",3,"appSort"],["scope","col","data-order","desc","data-name","name",1,"sort",3,"appSort"],[4,"ngFor","ngForOf"],["type","button",1,"btn","magnifyText","btn-outline-primary","btn",3,"click"]],template:function(e,t){if(1&e&&(b.dc(0,"nav",0),b.dc(1,"ol",1),b.dc(2,"li",2),b.dc(3,"a",3),b.Qc(4,"Local Governments"),b.cc(),b.cc(),b.dc(5,"li",4),b.Qc(6,"All LGAs"),b.cc(),b.cc(),b.cc(),b.dc(7,"div",5),b.dc(8,"div",6),b.dc(9,"div",7),b.dc(10,"div",8),b.dc(11,"h6",9),b.Qc(12,"LGAs MASTER LIST"),b.cc(),b.dc(13,"select",10,11),b.nc("ngModelChange",function(e){return t.stateId=e})("change",function(){return t.getLgas()}),b.Oc(15,Kc,3,4,"option",12),b.cc(),b.dc(16,"input",13),b.nc("ngModelChange",function(e){return t.searchText=e}),b.cc(),b.dc(17,"div",14),b.dc(18,"table",15),b.Oc(19,wc,1,0,"ng-container",16),b.cc(),b.Oc(20,Qc,2,0,"div",17),b.cc(),b.cc(),b.cc(),b.cc(),b.cc(),b.Oc(21,kc,5,0,"ng-template",null,18,b.Pc),b.Oc(23,Pc,1,3,"ng-template",null,19,b.Pc),b.Oc(25,Ac,4,0,"ng-template",null,20,b.Pc),b.Oc(27,zc,11,11,"ng-template",null,21,b.Pc)),2&e){const e=b.Gc(22),c=b.Gc(24);b.Kb(13),b.yc("ngModel",t.stateId),b.Kb(2),b.yc("ngForOf",t.states),b.Kb(1),b.yc("ngModel",t.searchText),b.Kb(3),b.yc("ngIf",t.loader.loaderVisible)("ngIfThen",e)("ngIfElse",c),b.Kb(1),b.yc("ngIf",t.localGovs.length>0)}},directives:[o.y,o.x,o.p,o.s,n.n,o.c,n.o,o.t,o.A,i.c,m.a,F.a],pipes:[n.z,i.b,N.a],styles:[".ngx-pagination .current{background-color:#727cf5!important;border-radius:3px}"]}),e})();var Rc=c("T2Cl");const Mc=[{path:"users",canActivate:[Rc.a],component:B},{path:"enrollment-zones",canActivate:[Rc.a],component:fe},{path:"hajj-year",canActivate:[Rc.a],component:zt},{path:"banks",canActivate:[Rc.a],component:Jt},{path:"states",canActivate:[Rc.a],component:mc},{path:"lga",canActivate:[Rc.a],component:Gc},{path:"",redirectTo:"users",pathMatch:"full"}];let Fc=(()=>{class e{}return e.\u0275mod=b.Vb({type:e}),e.\u0275inj=b.Ub({factory:function(t){return new(t||e)},imports:[[n.c,s.f.forChild(Mc)]]}),e})();var Nc=c("hctd"),Ec=c("q4JE");let $c=(()=>{class e{}return e.\u0275mod=b.Vb({type:e}),e.\u0275inj=b.Ub({factory:function(t){return new(t||e)},imports:[[n.c,Fc,i.a,a.e,o.j,o.w,Nc.a,Ec.a]]}),e})()}}]);